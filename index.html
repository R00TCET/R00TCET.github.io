<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>єДокумент</title>

  <!-- Динамічно вбудований маніфест PWA -->
  <link id="manifest" rel="manifest">

  <!-- Налаштування для iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAAAXNSR0IArs4c6QAAAyJJREFUeF7t0AEBAAAAEADC/2H5NEbDAwKChAAAAAAAAAAAAAD45wEAAAAAAAAAAAAA8McDAAAAAAAAAAAAAODjBwAAAAAAAAAAAABA/3kAAAAAAAAAAAAAwB8PAAAAAAAAAAAAAHg4AQAAAAAAAAAAAMD/eQAAAAAAAAAAAADAHw8AAAAAAAAAAAAA8HACAAAAAAAAAAAAgP7zAAAAAAAAAAAAAIC/HAAAAAAAAAAAAACAhxMAAAAAAAAAAAAA+s8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/xsA3g4Y9QAAAABJRU5ErkJggg==">
  <meta name="theme-color" content="#4e8cde">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&display=swap');

    :root {
      --text-color: #000;
      --label-color: #6c6c70; /* Світліший сірий для підписів */
      --app-background: #f0f2f5;
      --card-background-solid: #fff;
      --active-nav-color: #007aff; /* Фірмовий синій */
      --banner-solid-green: #5DBA7D;
      --nav-background: #000;
      --nav-text-color: #8e8e93;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Manrope', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: var(--app-background); /* Суцільний колір фону */
      height: 100vh;
      color: var(--text-color);
      overflow: hidden;
      position: relative;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    
    /* Градієнт у верхній частині екрана */
    body::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 30vh;
        background: linear-gradient(180deg, #e0eaff 0%, var(--app-background) 100%);
        z-index: -1;
    }

    .app-container { height: 100%; display: flex; flex-direction: column; }
    .content { flex-grow: 1; position: relative; }

    .page {
      width: 100%; height: 100%; position: absolute; top: 0; left: 0;
      padding: 0;
      overflow-y: auto;
      transition: opacity 0.4s ease-in-out;
      visibility: hidden; opacity: 0;
    }
    .page.active { visibility: visible; opacity: 1; }

    #page-docs.active { display: flex; flex-direction: column; justify-content: center; padding-top: 40px; }

    .slider-container {
      width: 100%;
      height: 520px;
      display: flex;
      align-items: center;
      position: relative;
      overflow: hidden;
      cursor: grab;
    }
    .slider-wrapper {
      display: flex;
      align-items: center;
      transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    .slide {
      flex: 0 0 85%;
      margin: 0 2.5%;
      height: 490px;
      transition: transform 0.4s ease, opacity 0.4s ease;
      -webkit-tap-highlight-color: transparent;
    }

    .flip-card {
        background-color: transparent;
        width: 100%; height: 100%;
        perspective: 1000px; cursor: pointer;
    }
    .flip-card-inner {
        position: relative; width: 100%; height: 100%;
        transition: transform 0.6s; transform-style: preserve-3d;
    }
    .flip-card-inner.is-flipped { transform: rotateY(180deg); }
    .flip-card-front, .flip-card-back {
        position: absolute; width: 100%; height: 100%;
        -webkit-backface-visibility: hidden; backface-visibility: hidden;
    }
    .flip-card-back {
        transform: rotateY(180deg); display: flex; flex-direction: column;
        align-items: center; justify-content: center; gap: 15px;
        background: var(--card-background-solid); border-radius: 28px;
        padding: 20px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
    }

    /* Оновлені стилі картки */
    .document-container {
        background: var(--card-background-solid);
        border-radius: 28px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
        overflow: hidden;
        height: 490px;
    }
    .empty-card { height: 100%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; color: #888; }
    .document-content { padding: 20px; }
    .document-title { font-size: 24px; font-weight: 800; margin-bottom: 20px; }
    .personal-info { display: flex; align-items: center; gap: 15px; }
    .photo { position: relative; } /* Для позиціонування галочки */
    .photo img { width: 100px; height: 133px; border-radius: 12px; object-fit: cover; }
    
    /* Галочка верифікації */
    .verified-tick {
        position: absolute; bottom: -2px; right: -2px;
        width: 28px; height: 28px; background-color: #34c759;
        border-radius: 50%; display: flex; align-items: center;
        justify-content: center; border: 3px solid #fff;
    }
    .verified-tick::after {
        content: ''; width: 6px; height: 12px; border: solid white;
        border-width: 0 3px 3px 0; transform: rotate(45deg); margin-bottom: 2px;
    }
    
    .details { display: flex; flex-direction: column; gap: 15px; }
    .detail-item { display: flex; flex-direction: column; }
    .detail-item .label { font-size: 15px; color: var(--label-color); font-weight: 400; }
    .detail-item .value { font-size: 18px; font-weight: 700; color: var(--text-color); }

    .status-banner-wrapper {
      background: var(--banner-solid-green);
      padding: 9px 0; overflow: hidden; white-space: nowrap;
    }
    @keyframes marquee { 0% { transform: translateX(50%); } 100% { transform: translateX(-150%); } }
    .status-banner { color: white; display: inline-block; font-size: 14px; font-weight: 500; padding-right: 50%; animation: marquee 12s linear infinite; }

    .info-section { padding: 20px; }
    .name-section { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; min-width: 0; }
    .full-name { display: flex; flex-direction: column; min-width: 0; }
    .name-part { font-size: 28px; font-weight: 800; line-height: 1.2; word-break: break-word; }
    .more-options { width: 36px; height: 36px; background-color: #2c2c2e; border-radius: 50%; display: flex; justify-content: center; align-items: center; flex-shrink: 0; margin-left: 10px; }
    .more-options svg { width: 20px; height: 20px; fill: #fff; }

    .page-indicator-container { padding: 30px 0; width: 100%; max-width: 400px; margin: 0 auto; }
    .page-indicator { display: flex; justify-content: center; gap: 6px; }
    .dot { width: 6px; height: 6px; background-color: rgba(0, 0, 0, 0.15); border-radius: 50%; transition: background-color 0.3s ease; }
    .dot.active { background-color: rgba(0, 0, 0, 0.4); }

    .bottom-nav { background-color: var(--nav-background); display: flex; justify-content: space-around; padding: 8px 0 20px 0; position: fixed; bottom: 0; left: 0; width: 100%; border-top-left-radius: 20px; border-top-right-radius: 20px; z-index: 100; }
    .nav-item { display: flex; flex-direction: column; align-items: center; text-decoration: none; color: var(--nav-text-color); gap: 4px; padding: 0 10px; cursor: pointer; }
    .nav-icon { width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; }
    .nav-icon svg { transition: all 0.2s ease; }
    .nav-label { font-size: 10px; transition: color 0.2s ease; }

    /* Стилі для активної іконки навігації */
    .nav-item.active .nav-label { color: var(--active-nav-color); }
    .nav-item.active .nav-icon .fill-on-active { fill: var(--active-nav-color); }
    .nav-item.active .nav-icon .stroke-on-active { stroke: var(--active-nav-color); }
    
    #qr-timer { font-size: 18px; font-weight: 700; color: var(--text-color); }
    .flip-card-back h3 { font-weight: 700; font-size: 16px; }
    .flip-card-back img { width: 200px; height: 200px; }
  </style>
</head>
<body>

  <div class="app-container">
    <main class="content">
      <div class="page" id="page-feed">
        <div class="placeholder-page"><h1>Стрічка</h1></div>
      </div>

      <div class="page active" id="page-docs">
        <div>
            <div class="slider-container">
              <div class="slider-wrapper">
                <!-- СЛАЙД 1 -->
                <div class="slide">
                  <div class="flip-card">
                    <div class="flip-card-inner">
                      <div class="flip-card-front">
                        <div class="document-container">
                            <div class="document-content">
                              <h1 class="document-title">єДокумент</h1>
                              <div class="personal-info">
                                <div class="photo">
                                  <img src="./pasport.png" alt="Фото">
                                  <div class="verified-tick"></div>
                                </div>
                                <div class="details">
                                  <div class="detail-item">
                                    <span class="label">Дата народження:</span>
                                    <span class="value">29.07.2005</span>
                                  </div>
                                  <div class="detail-item">
                                    <span class="label">РНОКПП:</span>
                                    <span class="value">3856163250</span>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="status-banner-wrapper">
                              <div class="status-banner">А ми нашу славну Україну, гей, гей, розвеселимо!</div>
                            </div>
                            <div class="info-section">
                              <div class="name-section">
                                <div class="full-name">
                                  <span class="name-part">Іванов</span>
                                  <span class="name-part">Іван</span>
                                  <span class="name-part">Іванович</span>
                                </div>
                                <div class="more-options">
                                  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
                                </div>
                              </div>
                            </div>
                        </div>
                      </div>
                      <div class="flip-card-back">
                          <h3>QR-код дійсний</h3>
                          <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=Example" alt="QR">
                          <div id="qr-timer"></div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- ІНШІ СЛАЙДИ -->
                <div class="slide"><div class="document-container empty-card">Паспорт</div></div>
                <div class="slide"><div class="document-container empty-card">Картка платника податків</div></div>
                <div class="slide"><div class="document-container empty-card">Додати документ</div></div>
              </div>
            </div>
            <div class="page-indicator-container">
                <div class="page-indicator">
                  <span class="dot active"></span> <span class="dot"></span> <span class="dot"></span> <span class="dot"></span>
                </div>
            </div>
        </div>
      </div>
      <div class="page" id="page-services"><div class="placeholder-page"><h1>Сервіси</h1></div></div>
      <div class="page" id="page-menu"><div class="placeholder-page"><h1>Меню</h1></div></div>
    </main>
    
    <nav class="bottom-nav">
      <div class="nav-item" data-page="page-feed">
        <div class="nav-icon"><svg class="stroke-on-active" width="28" height="28" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#8e8e93"><path d="M6.99986 2.61536H12.9999C15.8283 2.61536 17.2425 2.61536 18.1212 3.49404C18.9999 4.37272 18.9999 5.78693 18.9999 8.61536V15.6154V20.6152C18.9999 21.7199 19.8954 22.6154 21 22.6154H6.99986C4.17143 22.6154 2.75722 22.6154 1.87854 21.7367C0.999861 20.858 0.999861 19.4438 0.999861 16.6154V8.61536C0.999861 5.78693 0.999861 4.37272 1.87854 3.49404C2.75722 2.61536 4.17143 2.61536 6.99986 2.61536Z" stroke-width="1.5"/><path d="M19 20.6154V13.6154H21C22.1046 13.6154 23 14.5108 23 15.6154V20.6154C23 21.7199 22.1046 22.6154 21 22.6154C19.8954 22.6154 19 21.7199 19 20.6154Z" stroke-width="1.5"/></svg></div>
        <span class="nav-label">Стрічка</span>
      </div>
      <div class="nav-item active" data-page="page-docs">
        <div class="nav-icon"><svg width="28" height="28" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="fill-on-active" x="2.75" y="2.36536" width="18.5" height="20.5" rx="3.25" fill="#8e8e93" stroke="#8e8e93" stroke-width="1.5"/></svg></div>
        <span class="nav-label">Документи</span>
      </div>
      <div class="nav-item" data-page="page-services">
        <div class="nav-icon"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="stroke-on-active" x="1.5" y="1.5" width="21" height="21" rx="5.5" stroke="#8e8e93" stroke-width="1.5"/><path class="stroke-on-active" d="M14.1433 5.49988C14.0556 5.5008 13.9693 5.52033 13.893 5.5567C13.8167 5.59307 13.7527 5.6453 13.7067 5.70888L7.2434 13.5679C7.15933 13.6749 7.12643 13.8118 7.15233 13.9427C7.17824 14.0736 7.2604 14.1867 7.37813 14.2514C7.49586 14.3161 7.6366 14.3262 7.76743 14.279H11.2179L9.39999 19.3522C9.35105 19.4828 9.35518 19.6273 9.41113 19.7547C9.46709 19.8821 9.57022 19.9821 9.69766 20.0319C9.8251 20.0817 9.96766 20.0766 10.0954 20.018C10.2231 19.9594 10.325 19.8524 10.374 19.7184L16.9168 11.7808C17.0008 11.6738 17.0337 11.5369 17.0078 11.406C16.9819 11.2751 16.9004 11.162 16.7827 11.0973C16.665 11.0326 16.5242 11.0225 16.3934 11.0697H12.9261L14.5812 5.98223C14.6343 5.83984 14.6281 5.68218 14.564 5.54408C14.4999 5.40598 14.3828 5.30002 14.2384 5.25203C14.0939 5.20403 13.9351 5.21854 13.8016 5.29173C13.668 5.36492 13.5701 5.48978 13.53 5.63723" stroke="#8e8e93" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
        <span class="nav-label">Сервіси</span>
      </div>
      <div class="nav-item" data-page="page-menu">
        <div class="nav-icon"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_new)"><circle class="stroke-on-active" cx="12" cy="12" r="11.25" stroke="#8e8e93" stroke-width="1.5"/><path class="stroke-on-active" d="M2.25208 19C4.43043 15.9719 7.98493 14 12 14C16.015 14 19.5695 15.9719 21.7479 19" stroke="#8e8e93" stroke-width="1.5" stroke-linecap="round"/><circle class="stroke-on-active" cx="12" cy="9.5" r="3.75" stroke="#8e8e93" stroke-width="1.5"/></g><defs><clipPath id="clip0_new"><rect width="24" height="24" rx="12" fill="white"/></clipPath></defs></svg></div>
        <span class="nav-label">Меню</span>
      </div>
    </nav>
  </div>

  <script>
    // Весь ваш JavaScript код залишається без змін, оскільки він керує логікою, а не виглядом.
    // ... (вставте сюди весь попередній JavaScript) ...
    document.addEventListener('DOMContentLoaded', () => {

      // --- НАВІГАЦІЯ ---
      const navItems = document.querySelectorAll('.nav-item');
      navItems.forEach(item => {
        item.addEventListener('click', () => {
          const targetPageId = item.dataset.page;
          const oldPage = document.querySelector('.page.active');
          const newPage = document.getElementById(targetPageId);
          if (oldPage === newPage) return;

          oldPage.classList.remove('active');
          newPage.classList.add('active');

          navItems.forEach(nav => nav.classList.remove('active'));
          item.classList.add('active');
        });
      });

      // --- ЛОГІКА СЛАЙДЕРА (ПЛАСКА КАРУСЕЛЬ) ---
      const sliderContainer = document.querySelector('.slider-container');
      const sliderWrapper = document.querySelector('.slider-wrapper');
      const slides = document.querySelectorAll('.slide');
      const dots = document.querySelectorAll('.page-indicator .dot');
      const slideCount = slides.length;

      let currentIndex = 0;
      let isDragging = false;
      let startPos = 0;
      let currentTranslate = 0;
      let prevTranslate = 0;
      let animationID;

      const getPositionX = (e) => e.type.includes('mouse') ? e.pageX : e.touches[0].clientX;
      
      const updateDots = () => {
          dots.forEach((dot, index) => dot.classList.toggle('active', index === currentIndex));
      };

      const setSliderPosition = () => {
        sliderWrapper.style.transform = `translateX(${currentTranslate}px)`;
        slides.forEach((slide, index) => {
            if (index === currentIndex) {
                slide.style.transform = 'scale(1)';
                slide.style.opacity = '1';
                slide.style.pointerEvents = 'auto';
            } else {
                slide.style.transform = 'scale(0.9)';
                slide.style.opacity = '0.7';
                slide.style.pointerEvents = 'none';
            }
        });
      };
      
      const dragStart = (e) => {
        isDragging = true;
        startPos = getPositionX(e);
        sliderWrapper.style.transition = 'none';
        animationID = requestAnimationFrame(animation);
        sliderContainer.style.cursor = 'grabbing';
      };
      
      const animation = () => {
          setSliderPosition();
          if (isDragging) requestAnimationFrame(animation);
      }

      const dragMove = (e) => {
        if (!isDragging) return;
        const currentPosition = getPositionX(e);
        currentTranslate = prevTranslate + currentPosition - startPos;
      };

      const dragEnd = () => {
        if (!isDragging) return;
        isDragging = false;
        cancelAnimationFrame(animationID);
        sliderContainer.style.cursor = 'grab';

        const movedBy = currentTranslate - prevTranslate;
        if (Math.abs(movedBy) < 10) return;

        if (movedBy < -50 && currentIndex < slideCount - 1) {
          currentIndex++;
        }
        if (movedBy > 50 && currentIndex > 0) {
          currentIndex--;
        }

        const targetSlide = slides[currentIndex];
        const containerCenter = sliderContainer.offsetWidth / 2;
        const slideCenter = targetSlide.offsetLeft + targetSlide.offsetWidth / 2;
        
        currentTranslate = containerCenter - slideCenter;
        prevTranslate = currentTranslate;
        
        sliderWrapper.style.transition = 'transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
        setSliderPosition();
        updateDots();
      };
      
      const initializeCarousel = () => {
          const targetSlide = slides[currentIndex];
          const containerCenter = sliderContainer.offsetWidth / 2;
          const slideCenter = targetSlide.offsetLeft + targetSlide.offsetWidth / 2;
          
          currentTranslate = containerCenter - slideCenter;
          prevTranslate = currentTranslate;
          
          sliderWrapper.style.transition = 'none';
          setSliderPosition();
      }
      
      window.addEventListener('load', initializeCarousel);
      window.addEventListener('resize', initializeCarousel);


      ['mousedown', 'touchstart'].forEach(e => sliderContainer.addEventListener(e, dragStart, { passive: true }));
      ['mouseup', 'touchend', 'mouseleave'].forEach(e => document.addEventListener(e, dragEnd));
      ['mousemove', 'touchmove'].forEach(e => document.addEventListener(e, dragMove, { passive: true }));

      const flipCards = document.querySelectorAll('.flip-card');
      const timerEl = document.getElementById('qr-timer');
      let timerInterval = null;

      function startTimer() {
          clearInterval(timerInterval);
          let timeLeft = 180;
          const updateTimerText = () => {
            const minutes = Math.floor(timeLeft / 60);
            let seconds = timeLeft % 60;
            seconds = seconds < 10 ? '0' + seconds : seconds;
            timerEl.textContent = `${minutes}:${seconds}`;
          };
          updateTimerText();
          timerInterval = setInterval(() => {
              timeLeft--;
              updateTimerText();
              if (timeLeft <= 0) {
                  clearInterval(timerInterval);
                  timerEl.textContent = "Час вийшов";
              }
          }, 1000);
      }

      flipCards.forEach(card => {
        card.addEventListener('click', () => {
            const movedBy = Math.abs(currentTranslate - prevTranslate);
            if (isDragging || movedBy > 5) return;
            const slide = card.closest('.slide');
            if (slide.style.transform !== 'scale(1)') return;

            const inner = card.querySelector('.flip-card-inner');
            inner.classList.toggle('is-flipped');
            if (inner.classList.contains('is-flipped')) {
                startTimer();
            } else {
                clearInterval(timerInterval);
                timerEl.textContent = "";
            }
        });
      });
    });
  </script>

</body>
</html>
