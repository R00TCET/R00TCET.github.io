<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>єДокумент</title>

  <!-- Динамічно вбудований маніфест PWA -->
  <link id="manifest" rel="manifest">

  <!-- ОНОВЛЕНО: Налаштування для iOS (чорний статус-бар) -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAAAXNSR0IArs4c6QAAAyJJREFUeF7t0AEBAAAAEADC/2H5NEbDAwKChAAAAAAAAAAAAAD45wEAAAAAAAAAAAAA8McDAAAAAAAAAAAAAODjBwAAAAAAAAAAAABA/3kAAAAAAAAAAAAAwB8PAAAAAAAAAAAAAHg4AQAAAAAAAAAAAMD/eQAAAAAAAAAAAADAHw8AAAAAAAAAAAAA8HACAAAAAAAAAAAAgP7zAAAAAAAAAAAAAIC/HAAAAAAAAAAAAACAhxMAAAAAAAAAAAAA+s8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/xsA3g4Y9QAAAABJRU5ErkJggg==">
  <meta name="theme-color" content="#111111">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&display=swap');

    :root {
      --text-color: #000;
      --label-color: #333;
      --background-gradient:
        radial-gradient(ellipse at 5% 5%, hsla(70, 88%, 88%, 0.8) 0, transparent 40%),
        radial-gradient(ellipse at 95% 90%, hsla(240, 88%, 85%, 0.7) 0, transparent 50%),
        linear-gradient(155deg, #e1f6b8, #bdecf3, #f5d5e5);
      --card-background: rgba(255, 255, 255, 0.45);
      --nav-background: #111;
      --nav-text-color: #8e8e93;
      --nav-active-color: #fff;
      /* --- ОНОВЛЕНО: Яскравіший градієнт для банера --- */
      --banner-background-bright: linear-gradient(90deg, #32CD32, #98FB98, #32CD32);
    }

    @keyframes animatedBackground {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Manrope', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--background-gradient);
      background-size: 200% 200%;
      animation: animatedBackground 30s ease infinite;
      height: 100vh;
      color: var(--text-color);
      overflow: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    .app-container { height: 100%; display: flex; flex-direction: column; }
    .content { flex-grow: 1; position: relative; }

    .page {
      width: 100%; height: 100%; position: absolute; top: 0; left: 0;
      padding: 0;
      overflow: hidden; /* Ховаємо скролбар, якщо він є */
      transition: opacity 0.4s ease-in-out;
      visibility: hidden; opacity: 0;
    }
    .page.active { visibility: visible; opacity: 1; }

    #page-docs.active { display: flex; flex-direction: column; justify-content: center; }

    .placeholder-page { display: flex; justify-content: center; align-items: center; height: 100%; font-size: 24px; color: #555; }

    .slider-container {
      width: 100%;
      height: 470px; /* Зменшено висоту щоб підняти картку */
      display: flex;
      align-items: center;
      position: relative;
      overflow: hidden;
      cursor: grab;
    }
    .slider-wrapper {
      display: flex;
      align-items: center;
      transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    .slide {
      flex: 0 0 85%;
      margin: 0 2.5%;
      height: 450px; /* Зменшено висоту картки */
      transition: transform 0.4s ease, opacity 0.4s ease;
      -webkit-tap-highlight-color: transparent;
    }

    .flip-card {
        background-color: transparent;
        width: 100%;
        height: 100%;
        perspective: 1000px;
        cursor: pointer;
    }
    .flip-card-inner {
        position: relative;
        width: 100%;
        height: 100%;
        transition: transform 0.6s;
        transform-style: preserve-3d;
    }
    .flip-card-inner.is-flipped { transform: rotateY(180deg); }
    .flip-card-front, .flip-card-back {
        position: absolute;
        width: 100%;
        height: 100%;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
    }
    .flip-card-back {
        transform: rotateY(180deg);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 15px;
        background: var(--card-background);
        border-radius: 24px;
        padding: 20px;
        backdrop-filter: blur(25px);
        -webkit-backdrop-filter: blur(25px);
        border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .document-container {
        background: var(--card-background);
        border-radius: 24px;
        backdrop-filter: blur(25px);
        -webkit-backdrop-filter: blur(25px);
        border: 1px solid rgba(255, 255, 255, 0.25);
        overflow: hidden;
        height: 100%;
    }
    .empty-card { height: 100%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; color: #888; }
    .document-content { padding: 20px; }
    .document-title { font-size: 24px; font-weight: 800; margin-bottom: 20px; }
    .personal-info {
        display: flex;
        align-items: flex-start;
        gap: 15px;
    }
    .photo {
        margin-top: 5px;
    }
    .photo img {
        width: 100px;
        height: 140px;
        border-radius: 12px;
        object-fit: cover;
    }
    .details { display: flex; flex-direction: column; gap: 15px; }
    .detail-item { display: flex; flex-direction: column; }
    .detail-item .label { font-size: 14px; color: var(--label-color); font-weight: 500; }
    .detail-item .value { font-size: 17px; font-weight: 700; color: var(--text-color); }

    .status-banner-wrapper {
      background: var(--banner-background-bright); /* Використовуємо новий яскравий градієнт */
      overflow: hidden;
      white-space: nowrap;
      padding: 7px 0; /* Зменшено висоту */
    }
    .status-banner {
      display: inline-block;
      animation: marquee 10s linear infinite;
    }
    @keyframes marquee {
        0% { transform: translateX(0); }
        100% { transform: translateX(-100%); }
    }
    .status-banner span { padding-right: 20px; }

    .info-section { padding: 20px; }
    .name-section {
        display: flex;
        justify-content: space-between;
        align-items: flex-end; /* Вирівнюємо по низу */
        min-width: 0;
    }
    .full-name { display: flex; flex-direction: column; min-width: 0; }
    .name-part {
        font-size: 26px;
        font-weight: 700; /* Зменшено жирність */
        line-height: 1.2;
        word-break: break-word;
    }
    .more-options {
        width: 36px;
        height: 36px;
        background-color: #2c2c2e;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-shrink: 0;
        margin-left: 10px;
        margin-bottom: 2px; /* Для точного вирівнювання з текстом */
    }
    .more-options svg { width: 20px; height: 20px; fill: #fff; }

    /* --- ОНОВЛЕНО: Позиція точок-індикаторів --- */
    .page-indicator-container {
        position: absolute;
        bottom: 95px; /* Розміщуємо над панеллю навігації */
        left: 50%;
        transform: translateX(-50%);
        width: 100%;
        max-width: 400px;
        padding: 20px 0;
    }
    .page-indicator { display: flex; justify-content: center; gap: 6px; }
    .dot { width: 7px; height: 7px; background-color: rgba(255, 255, 255, 0.3); border-radius: 50%; transition: background-color 0.3s ease; }
    .dot.active { background-color: rgba(255, 255, 255, 0.9); }

    .bottom-nav { display: flex; justify-content: space-around; background-color: var(--nav-background); padding: 8px 0 20px 0; position: fixed; bottom: 0; left: 0; width: 100%; border-top-left-radius: 20px; border-top-right-radius: 20px; z-index: 100; }
    .nav-item { display: flex; flex-direction: column; align-items: center; text-decoration: none; color: var(--nav-text-color); gap: 4px; padding: 0 10px; cursor: pointer; }
    .nav-icon { width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; }
    .nav-label { font-size: 10px; }
    .nav-item.active .nav-label { color: var(--nav-active-color); }

    #update-notification { position: fixed; bottom: 90px; left: 50%; transform: translateX(-50%); background-color: #28a745; color: white; padding: 10px 20px; border-radius: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); z-index: 200; cursor: pointer; font-size: 14px; font-weight: 500; display: none; }

    #qr-timer { font-size: 18px; font-weight: 700; color: var(--text-color); }
    .flip-card-back h3 { font-weight: 700; font-size: 16px; }
    .flip-card-back img { width: 200px; height: 200px; }
  </style>
</head>
<body>

  <div class="app-container">
    <main class="content">
      <div class="page" id="page-feed">
        <div class="placeholder-page"><h1>Стрічка</h1></div>
      </div>

      <div class="page active" id="page-docs">
        <div>
            <div class="slider-container">
              <div class="slider-wrapper">
                <!-- СЛАЙД 1 -->
                <div class="slide">
                  <div class="flip-card">
                    <div class="flip-card-inner">
                      <div class="flip-card-front">
                        <div class="document-container">
                            <div class="document-content">
                              <h1 class="document-title">єДокумент</h1>
                              <div class="personal-info">
                                <div class="photo">
                                  <img src="./pasport.png" alt="Фото">
                                </div>
                                <div class="details">
                                  <div class="detail-item">
                                    <span class="label">Дата народження:</span>
                                    <span class="value">29.07.2005</span>
                                  </div>
                                  <div class="detail-item">
                                    <span class="label">РНОКПП:</span>
                                    <span class="value">3856163250</span>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="status-banner-wrapper">
                              <div class="status-banner">
                                <span>А ми нашу славну Україну, гей, гей, розвеселимо!</span>
                                <span>А ми нашу славну Україну, гей, гей, розвеселимо!</span>
                              </div>
                            </div>
                            <div class="info-section">
                              <div class="name-section">
                                <div class="full-name">
                                  <span class="name-part">Іванов</span>
                                  <span class="name-part">Іван</span>
                                  <span class="name-part">Іванович</span>
                                </div>
                                <!-- ОНОВЛЕНО: Кнопка переміщена сюди для вирівнювання -->
                                <div class="more-options">
                                  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
                                </div>
                              </div>
                            </div>
                        </div>
                      </div>
                      <div class="flip-card-back">
                          <h3>QR-код дійсний</h3>
                          <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=Example" alt="QR">
                          <div id="qr-timer"></div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- СЛАЙД 2 -->
                <div class="slide"><div class="document-container empty-card">Паспорт</div></div>
                <!-- СЛАЙД 3 -->
                <div class="slide"><div class="document-container empty-card">Картка платника податків</div></div>
                <!-- СЛАЙД 4 -->
                <div class="slide"><div class="document-container empty-card">Додати документ</div></div>
              </div>
            </div>
        </div>
        <!-- Індикатори винесені за межі основного блоку для позиціонування -->
        <div class="page-indicator-container">
            <div class="page-indicator">
              <span class="dot active"></span>
              <span class="dot"></span>
              <span class="dot"></span>
              <span class="dot"></span>
            </div>
        </div>
      </div>

      <div class="page" id="page-services">
        <div class="placeholder-page"><h1>Сервіси</h1></div>
      </div>

      <div class="page" id="page-menu">
        <div class="placeholder-page"><h1>Меню</h1></div>
      </div>
    </main>

    <div id="update-notification">Доступне оновлення. Оновити?</div>

    <nav class="bottom-nav">
        <div class="nav-item" data-page="page-feed">
          <div class="nav-icon"><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.99986 2.61536H12.9999C15.8283 2.61536 17.2425 2.61536 18.1212 3.49404C18.9999 4.37272 18.9999 5.78693 18.9999 8.61536V15.6154V20.6152C18.9999 21.7199 19.8954 22.6154 21 22.6154H6.99986C4.17143 22.6154 2.75722 22.6154 1.87854 21.7367C0.999861 20.858 0.999861 19.4438 0.999861 16.6154V8.61536C0.999861 5.78693 0.999861 4.37272 1.87854 3.49404C2.75722 2.61536 4.17143 2.61536 6.99986 2.61536Z" stroke="white" stroke-width="1.5"/><path d="M19 20.6154V13.6154H21C22.1046 13.6154 23 14.5108 23 15.6154V20.6154C23 21.7199 22.1046 22.6154 21 22.6154C19.8954 22.6154 19 21.7199 19 20.6154Z" stroke="white" stroke-width="1.5"/><rect x="4.5" y="17.1154" width="11" height="1.5" rx="0.5" fill="white"/><rect width="10" height="7" rx="1" transform="matrix(-1 0 0 1 15 6.61536)" stroke="white" stroke-width="1.5"/></svg></div>
          <span class="nav-label">Стрічка</span>
        </div>
        <div class="nav-item active" data-page="page-docs">
          <div class="nav-icon"><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2.75" y="2.36536" width="18.5" height="20.5" rx="3.25" fill="white" stroke="white" stroke-width="1.5"/><path d="M6 18.6154C6 18.3392 6.22386 18.1154 6.5 18.1154H14.5C14.7761 18.1154 15 18.3392 15 18.6154V19.1154C15 19.3915 14.7761 19.6154 14.5 19.6154H6.5C6.22386 19.6154 6 19.3915 6 19.1154V18.6154Z" fill="black"/><path d="M6 15.1154C6 14.8392 6.22386 14.6154 6.5 14.6154H17.5C17.7761 14.6154 18 14.8392 18 15.1154V15.6154C18 15.8915 17.7761 16.1154 17.5 16.1154H6.5C6.22386 16.1154 6 15.8915 6 15.6154V15.1154Z" fill="black"/><mask id="path-4-inside-1_13657_22158" fill="white"><rect x="6" y="5.61536" width="7" height="7" rx="1"/></mask><rect x="6" y="5.61536" width="7" height="7" rx="1" stroke="black" stroke-width="3" mask="url(#path-4-inside-1_13657_22158)"/></svg></div>
          <span class="nav-label">Документи</span>
        </div>
        <div class="nav-item" data-page="page-services">
          <div class="nav-icon"><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="path-1-inside-1_13657_22172" fill="white"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 23.6154C5.84037 23.6154 4.18232 23.3034 2.74717 21.8682C1.30306 20.4241 1 18.775 1 12.6154C1 6.45573 1.31199 4.80661 2.74717 3.36253C4.18232 1.92735 5.84037 1.61536 12 1.61536C18.1596 1.61536 19.8177 1.92735 21.2528 3.36253C22.6969 4.80661 23 6.45573 23 12.6154C23 18.775 22.6969 20.4241 21.2528 21.8682C19.8177 23.3034 18.1596 23.6154 12 23.6154Z"/></mask><path d="M2.74717 21.8682L3.80785 20.8075L3.80782 20.8075L2.74717 21.8682ZM2.74717 3.36253L1.68649 2.30188L1.68324 2.30515L2.74717 3.36253ZM21.2528 3.36253L20.1922 4.42318L20.1922 4.42319L21.2528 3.36253ZM21.2528 21.8682L20.1922 20.8075L20.1922 20.8075L21.2528 21.8682ZM12 22.1154C8.90493 22.1154 7.08603 22.0336 5.88008 21.806C4.78166 21.5987 4.2908 21.2905 3.80785 20.8075L1.6865 22.9288C2.63869 23.881 3.69443 24.4465 5.32373 24.7539C6.84551 25.0411 8.93544 25.1154 12 25.1154V22.1154ZM3.80782 20.8075C3.31966 20.3194 3.01222 19.8284 2.8062 18.7329C2.57961 17.528 2.5 15.7117 2.5 12.6154H-0.5C-0.5 15.6786 -0.428084 17.7667 -0.142115 19.2873C0.164424 20.9173 0.730574 21.9729 1.68652 22.9289L3.80782 20.8075ZM2.5 12.6154C2.5 9.52026 2.58179 7.70371 2.80933 6.49901C3.01645 5.40245 3.32467 4.90936 3.81111 4.4199L1.68324 2.30515C0.734497 3.25978 0.169128 4.31329 -0.138544 5.94221C-0.425792 7.46301 -0.5 9.55083 -0.5 12.6154H2.5ZM3.80785 4.42318C4.2908 3.94021 4.78166 3.63203 5.88008 3.42473C7.08603 3.19714 8.90493 3.11536 12 3.11536V0.115356C8.93544 0.115356 6.84551 0.189572 5.32373 0.476771C3.69443 0.784262 2.63869 1.34967 1.6865 2.30188L3.80785 4.42318ZM12 3.11536C15.0951 3.11536 16.914 3.19714 18.1199 3.42473C19.2183 3.63203 19.7092 3.94021 20.1922 4.42318L22.3135 2.30188C21.3613 1.34967 20.3056 0.784261 18.6763 0.476771C17.1545 0.189572 15.0646 0.115356 12 0.115356V3.11536ZM20.1922 4.42319C20.6803 4.91135 20.9878 5.40236 21.1938 6.49785C21.4204 7.70272 21.5 9.51898 21.5 12.6154H24.5C24.5 9.55211 24.4281 7.464 24.1421 5.94338C23.8356 4.31338 23.2694 3.25779 22.3135 2.30187L20.1922 4.42319ZM21.5 12.6154C21.5 15.7117 21.4204 17.528 21.1938 18.7329C20.9878 19.8284 20.6803 20.3194 20.1922 20.8075L22.3135 22.9288C23.2694 21.9729 23.8356 20.9173 24.1421 19.2873C24.4281 17.7667 24.5 15.6786 24.5 12.6154H21.5ZM20.1922 20.8075C19.7092 21.2905 19.2183 21.5987 18.1199 21.806C16.914 22.0336 15.0951 22.1154 12 22.1154V25.1154C15.0646 25.1154 17.1545 25.0411 18.6763 24.7539C20.3056 24.4465 21.3613 23.881 22.3135 22.9288L20.1922 20.8075Z" fill="white" mask="url(#path-1-inside-1_13657_22172)"/><path d="M14.1433 5.61549C14.1302 5.61651 14.1171 5.61817 14.1041 5.62046C14.0557 5.62707 14.0093 5.64237 13.9678 5.66544C13.9263 5.68851 13.8906 5.71885 13.8628 5.7546L7.39955 13.6136C7.36155 13.6611 7.33901 13.7169 7.33439 13.775C7.32976 13.8331 7.34323 13.8912 7.37333 13.9429C7.40342 13.9947 7.44899 14.0381 7.50506 14.0685C7.56113 14.099 7.62555 14.1151 7.6913 14.1154H11.1418L9.32393 19.1885C9.29398 19.2613 9.29508 19.3413 9.32702 19.4134C9.35895 19.4856 9.41953 19.5449 9.49737 19.5803C9.57521 19.6156 9.66495 19.6246 9.74976 19.6056C9.83456 19.5865 9.90858 19.5407 9.95792 19.4767L16.6007 11.6171C16.6387 11.5696 16.6613 11.5138 16.6659 11.4557C16.6705 11.3976 16.6571 11.3396 16.627 11.2878C16.5969 11.236 16.5513 11.1926 16.4952 11.1622C16.4392 11.1318 16.3748 11.1156 16.309 11.1154H12.8417L14.4968 6.02785C14.5138 5.9795 14.5175 5.92825 14.5076 5.87837C14.4977 5.8285 14.4745 5.78143 14.44 5.74109C14.4054 5.70076 14.3604 5.66831 14.3088 5.64647C14.2573 5.62462 14.2005 5.614 14.1433 5.61549Z" fill="white"/></svg></div>
          <span class="nav-label">Сервіси</span>
        </div>
        <div class="nav-item" data-page="page-menu">
          <div class="nav-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_5391_4802)"><circle cx="12" cy="12" r="11.25" stroke="white" stroke-width="1.5"/><path d="M2.25208 19C4.43043 15.9719 7.98493 14 12 14C16.015 14 19.5695 15.9719 21.7479 19C21.4436 19.423 21.1125 19.8253 20.7571 20.2045C18.877 17.3693 15.6568 15.5 12 15.5C8.34319 15.5 5.12301 17.3693 3.24289 20.2045C2.88744 19.8253 2.55633 19.4229 2.25208 19Z" fill="white"/><rect x="9" y="5" width="6" height="7" rx="3" stroke="white" stroke-width="1.5"/></g><defs><clipPath id="clip0_5391_4802"><rect width="24" height="24" rx="12" fill="white"/></clipPath></defs></svg></div>
          <span class="nav-label">Меню</span>
        </div>
      </nav>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {

      // --- НАВІГАЦІЯ ---
      const navItems = document.querySelectorAll('.nav-item');
      navItems.forEach(item => {
        item.addEventListener('click', () => {
          const targetPageId = item.dataset.page;
          const oldPage = document.querySelector('.page.active');
          const newPage = document.getElementById(targetPageId);
          if (oldPage === newPage) return;

          oldPage.classList.remove('active');
          newPage.classList.add('active');

          navItems.forEach(nav => nav.classList.remove('active'));
          item.classList.add('active');
        });
      });

      // --- ЛОГІКА СЛАЙДЕРА (ПЛАСКА КАРУСЕЛЬ) ---
      const sliderContainer = document.querySelector('.slider-container');
      const sliderWrapper = document.querySelector('.slider-wrapper');
      const slides = document.querySelectorAll('.slide');
      const dots = document.querySelectorAll('.page-indicator .dot');
      const slideCount = slides.length;

      let currentIndex = 0;
      let isDragging = false;
      let startPos = 0;
      let currentTranslate = 0;
      let prevTranslate = 0;
      let animationID;

      const getPositionX = (e) => e.type.includes('mouse') ? e.pageX : e.touches[0].clientX;
      
      const updateDots = () => {
          dots.forEach((dot, index) => dot.classList.toggle('active', index === currentIndex));
      };

      const setSliderPosition = () => {
        sliderWrapper.style.transform = `translateX(${currentTranslate}px)`;
        slides.forEach((slide, index) => {
            if (index === currentIndex) {
                slide.style.transform = 'scale(1)';
                slide.style.opacity = '1';
                slide.style.pointerEvents = 'auto';
            } else {
                slide.style.transform = 'scale(0.9)';
                slide.style.opacity = '0.7';
                slide.style.pointerEvents = 'none';
            }
        });
      };
      
      const dragStart = (e) => {
        isDragging = true;
        startPos = getPositionX(e);
        sliderWrapper.style.transition = 'none';
        animationID = requestAnimationFrame(animation);
        sliderContainer.style.cursor = 'grabbing';
      };
      
      const animation = () => {
          setSliderPosition();
          if (isDragging) requestAnimationFrame(animation);
      }

      const dragMove = (e) => {
        if (!isDragging) return;
        const currentPosition = getPositionX(e);
        currentTranslate = prevTranslate + currentPosition - startPos;
      };

      const dragEnd = () => {
        if (!isDragging) return;
        isDragging = false;
        cancelAnimationFrame(animationID);
        sliderContainer.style.cursor = 'grab';

        const movedBy = currentTranslate - prevTranslate;
        if (Math.abs(movedBy) < 10) return;

        if (movedBy < -50 && currentIndex < slideCount - 1) {
          currentIndex++;
        }
        if (movedBy > 50 && currentIndex > 0) {
          currentIndex--;
        }

        const targetSlide = slides[currentIndex];
        const containerCenter = sliderContainer.offsetWidth / 2;
        const slideCenter = targetSlide.offsetLeft + targetSlide.offsetWidth / 2;
        
        currentTranslate = containerCenter - slideCenter;
        prevTranslate = currentTranslate;
        
        sliderWrapper.style.transition = 'transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
        setSliderPosition();
        updateDots();
      };
      
      const initializeCarousel = () => {
          const targetSlide = slides[currentIndex];
          const containerCenter = sliderContainer.offsetWidth / 2;
          const slideCenter = targetSlide.offsetLeft + targetSlide.offsetWidth / 2;
          
          currentTranslate = containerCenter - slideCenter;
          prevTranslate = currentTranslate;
          
          sliderWrapper.style.transition = 'none';
          setSliderPosition();
      }
      
      window.addEventListener('load', initializeCarousel);
      window.addEventListener('resize', initializeCarousel);


      ['mousedown', 'touchstart'].forEach(e => sliderContainer.addEventListener(e, dragStart, { passive: true }));
      ['mouseup', 'touchend', 'mouseleave'].forEach(e => document.addEventListener(e, dragEnd));
      ['mousemove', 'touchmove'].forEach(e => document.addEventListener(e, dragMove, { passive: true }));

      // --- ЛОГІКА ПЕРЕВЕРТАННЯ КАРТКИ І ТАЙМЕРА ---
      const flipCards = document.querySelectorAll('.flip-card');
      const timerEl = document.getElementById('qr-timer');
      let timerInterval = null;

      function startTimer() {
          clearInterval(timerInterval);
          let timeLeft = 180;
          const updateTimerText = () => {
            const minutes = Math.floor(timeLeft / 60);
            let seconds = timeLeft % 60;
            seconds = seconds < 10 ? '0' + seconds : seconds;
            timerEl.textContent = `${minutes}:${seconds}`;
          };
          updateTimerText();
          timerInterval = setInterval(() => {
              timeLeft--;
              updateTimerText();
              if (timeLeft <= 0) {
                  clearInterval(timerInterval);
                  timerEl.textContent = "Час вийшов";
              }
          }, 1000);
      }

      flipCards.forEach(card => {
        card.addEventListener('click', () => {
            const movedBy = Math.abs(currentTranslate - prevTranslate);
            if (isDragging || movedBy > 5) return;
            
            const slide = card.closest('.slide');
            if (slide.style.transform !== 'scale(1)') return;

            const inner = card.querySelector('.flip-card-inner');
            inner.classList.toggle('is-flipped');
            if (inner.classList.contains('is-flipped')) {
                startTimer();
            } else {
                clearInterval(timerInterval);
                timerEl.textContent = "";
            }
        });
      });

      // --- ЛОГІКА SERVICE WORKER ---
      const VERSION = new Date().getTime();
      const CACHE_NAME = `diia-clone-cache-v${VERSION}`;
      const manifest = {
        "name": "єДокумент", "short_name": "єДокумент", "start_url": ".", "display": "standalone", "background_color": "#c9e3eb", "theme_color": "#111111",
        "icons": [{"src": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAAAXNSR0IArs4c6QAAAyJJREFUeF7t0AEBAAAAEADC/2H5NEbDAwKChAAAAAAAAAAAAAD45wEAAAAAAAAAAAAA8McDAAAAAAAAAAAAAODjBwAAAAAAAAAAAABA/3kAAAAAAAAAAAAAwB8PAAAAAAAAAAAAAHg4AQAAAAAAAAAAAMD/eQAAAAAAAAAAAADAHw8AAAAAAAAAAAAA8HACAAAAAAAAAAAAgP7zAAAAAAAAAAAAAIC/HAAAAAAAAAAAAACAhxMAAAAAAAAAAAAA+s8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/xsA3g4Y9QAAAABJRU5ErkJggg==", "sizes": "192x192", "type": "image/png"}]
      };
      const manifestBlob = new Blob([JSON.stringify(manifest)], { type: 'application/json' });
      document.getElementById('manifest').href = URL.createObjectURL(manifestBlob);
      const swCode = `
        const CACHE_NAME = '${CACHE_NAME}';
        const urlsToCache = ['${location.href.replace(/\?.*$/, '')}'];
        self.addEventListener('install', e => e.waitUntil(caches.open(CACHE_NAME).then(c => c.addAll(urlsToCache))));
        self.addEventListener('activate', e => e.waitUntil(caches.keys().then(names => Promise.all(names.map(name => name !== CACHE_NAME && caches.delete(name))))));
        self.addEventListener('fetch', e => e.respondWith(caches.match(e.request).then(r => r || fetch(e.request))));
        self.addEventListener('message', e => { if (e.data.action === 'skipWaiting') self.skipWaiting(); });
      `;
      const swBlob = new Blob([swCode], { type: 'application/javascript' });

      if ('serviceWorker' in navigator) {
        let newWorker;
        const updateNotification = document.getElementById('update-notification');
        updateNotification.addEventListener('click', () => newWorker.postMessage({ action: 'skipWaiting' }));
        navigator.serviceWorker.register(URL.createObjectURL(swBlob)).then(reg => {
          reg.addEventListener('updatefound', () => {
            newWorker = reg.installing;
            newWorker.addEventListener('statechange', () => {
              if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                updateNotification.style.display = 'block';
              }
            });
          });
        });
        let refreshing;
        navigator.serviceWorker.addEventListener('controllerchange', () => {
          if (refreshing) return;
          window.location.reload();
          refreshing = true;
        });
      }
    });
  </script>

</body>
</html>
