<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Дія</title>
<!-- Динамічно вбудований маніфест PWA -->
<link id="manifest" rel="manifest">
<!-- Налаштування для iOS (чорний статус-бар) -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAAAXNSR0IArs4c6QAAAyJJREFUeF7t0AEBAAAAEADC/2H5NEbDAwKChAAAAAAAAAAAAAD45wEAAAAAAAAAAAAA8McDAAAAAAAAAAAAAODjBwAAAAAAAAAAAABA/3kAAAAAAAAAAAAAwB8PAAAAAAAAAAAAAHg4AQAAAAAAAAAAAMD/eQAAAAAAAAAAAADAHw8AAAAAAAAAAAAA8HACAAAAAAAAAAAAgP7zAAAAAAAAAAAAAIC/HAAAAAAAAAAAAACAhxMAAAAAAAAAAAAA+s8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/xsA3g4Y9QAAAABJRU5ErkJggg==">
<meta name="theme-color" content="#111111">
<!-- Скрипт для Lottie Animation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.6/lottie.min.js"></script>
<script src="https://cdn.lottielab.com/s/lottie-player@1.x/player-web.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap');

:root {
--text-color: #000;
--label-color: #333;
--background-gradient:
radial-gradient(ellipse at 5% 5%, hsla(70, 88%, 88%, 0.8) 0, transparent 40%),
radial-gradient(ellipse at 95% 90%, hsla(240, 88%, 85%, 0.7) 0, transparent 50%),
linear-gradient(155deg, #e1f6b8, #bdecf3, #f5d5e5);
--card-background: rgba(255, 255, 255, 0.45);
--nav-background: #111;
--nav-text-color: #8e8e93;
--nav-active-color: #fff;
--banner-background-soft: linear-gradient(90deg, rgba(173, 223, 173, 0.8), rgba(225, 246, 184, 0.85), rgba(173, 223, 173, 0.8));

/* Menu specific colors */
--menu-bg-color: #dbe9f5;
--menu-item-bg: #fff;
--menu-item-border: #e8e8e8;
--menu-item-text: #000;
--menu-section-spacing: 16px;
}

@keyframes animatedBackground {
0% { background-position: 0% 50%; }
50% { background-position: 100% 50%; }
100% { background-position: 0% 50%; }
}

@keyframes shake {
0%, 100% { transform: translateX(0); }
25% { transform: translateX(-5px); }
75% { transform: translateX(5px); }
}

* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
font-family: 'Manrope', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
background: var(--background-gradient);
background-size: 200% 200%;
animation: animatedBackground 30s ease infinite;
height: 100vh;
color: var(--text-color);
overflow: hidden;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
-webkit-user-select: none;
-ms-user-select: none;
user-select: none;
}

button, .nav-item, .menu-item {
outline: none;
}
button:focus, .nav-item:focus, .menu-item:focus {
outline: none;
}


/* --- СТИЛІ ДЛЯ СТАРТОВОГО ЕКРАНУ --- */
#splash-screen {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
z-index: 10000;
background: linear-gradient(to bottom, #d4e7f5, #e9f3f9);
display: flex;
flex-direction: column;
justify-content: flex-end;
padding-bottom: 8vh;
align-items: center;
transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
}
#splash-screen.hidden {
opacity: 0;
visibility: hidden;
}
.splash-content {
position: absolute;
top: 25vh;
}
.splash-content h1 {
font-size: 48px;
color: #000;
font-weight: 600;
}
.lottie-container {
margin: 0 auto;
}

/* --- СТИЛІ ДЛЯ ЕКРАНУ ВВОДУ ПАРОЛЮ --- */
#login-screen {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
z-index: 9999;
background: var(--background-gradient);
background-size: 200% 200%;
animation: animatedBackground 30s ease infinite;
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
text-align: center;
transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
opacity: 0;
visibility: hidden;
}
#login-screen.visible {
opacity: 1;
visibility: visible;
}
.login-title {
font-size: 28px;
font-weight: 600;
margin-bottom: 20px;
}
.passcode-dots {
display: flex;
gap: 15px;
margin-bottom: 30px;
}
.passcode-dots.shake {
animation: shake 0.3s linear;
}
.passcode-dot {
width: 8px;
height: 8px;
background-color: rgba(255, 255, 255, 0.8);
border-radius: 50%;
transition: background-color 0.2s ease;
}
.passcode-dot.filled {
background-color: #000;
}
.keypad {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 20px;
width: 280px;
}
.keypad-btn {
width: 75px;
height: 75px;
border-radius: 50%;
border: none;
background-color: rgba(255, 255, 255, 0.8);
font-size: 28px;
font-weight: 500;
color: #000;
cursor: pointer;
display: flex;
justify-content: center;
align-items: center;
transition: background-color 0.2s ease;
backdrop-filter: blur(5px);
-webkit-backdrop-filter: blur(5px);
outline: none;
}
.keypad-btn:active {
background-color: rgba(255, 255, 255, 1);
}
.keypad-btn.icon {
background: transparent;
backdrop-filter: none;
}
.keypad-btn img {
width: 70px;
height: 70px;
opacity: 0.7;
}
.keypad-btn svg {
width: 35px;
height: 35px;
}
.forgot-password {
position: absolute;
bottom: 5vh;
padding: 10px;
color: #000;
font-size: 16px;
cursor: pointer;
}

/* --- Ховаємо основний контент на старті --- */
.app-container {
height: 100%;
display: none;
flex-direction: column;
}
.content { flex-grow: 1; position: relative; }

.page {
width: 100%; height: 100%; position: absolute; top: 0; left: 0;
padding: 0;
overflow: hidden;
transition: opacity 0.4s ease-in-out;
visibility: hidden; opacity: 0;
}
.page.active { visibility: visible; opacity: 1; }

#page-docs.active { display: flex; flex-direction: column; justify-content: center; }

.placeholder-page { display: flex; justify-content: center; align-items: center; height: 100%; font-size: 24px; color: #555; }

.slider-container {
width: 100%;
height: 435px;
margin-top: -50px;
display: flex;
align-items: center;
position: relative;
overflow: hidden;
cursor: grab;
}
.slider-wrapper {
display: flex;
align-items: center;
gap: 3px;
}
.slide {
flex: 0 0 80%;
height: 435px;
-webkit-tap-highlight-color: transparent;
padding: 0 5px; /* ВІДСТУП ДЛЯ АНІМАЦІЇ */
}

.flip-card {
background-color: transparent;
width: 100%;
height: 100%;
perspective: 2000px; /* ПОКРАЩЕНА ПЕРСПЕКТИВА */
cursor: pointer;
}
.flip-card-inner {
position: relative;
width: 100%;
height: 100%;
transition: transform 0.6s;
transform-style: preserve-3d;
}
.flip-card-inner.is-flipped { transform: rotateY(180deg); }
.flip-card-front, .flip-card-back {
position: absolute;
width: 100%;
height: 100%;
-webkit-backface-visibility: hidden;
backface-visibility: hidden;
}
.flip-card-back {
transform: rotateY(180deg);
display: flex;
flex-direction: column;
align-items: center;
justify-content: space-around;
background: rgba(255, 255, 255, 0.9);
border-radius: 24px;
padding: 20px;
backdrop-filter: blur(25px);
-webkit-backdrop-filter: blur(25px);
border: 1px solid rgba(255, 255, 255, 0.3);
}

.document-container {
background: var(--card-background);
border-radius: 24px;
backdrop-filter: blur(25px);
-webkit-backdrop-filter: blur(25px);
border: 1px solid rgba(255, 255, 255, 0.25);
overflow: hidden;
height: 100%;
display: flex;
flex-direction: column;
}
.empty-card { height: 100%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; color: #888; }
.document-content { padding: 20px; padding-bottom: 0; }
.document-title {
font-size: 22px;
font-weight: 600;
margin-bottom: 20px;
opacity: 0.8;
}
.personal-info {
display: flex;
align-items: flex-start;
gap: 15px;
margin-bottom: 30px;
}
.photo {
margin-top: 5px;
}
.photo img {
width: 110px;
height: 154px;
border-radius: 12px;
object-fit: cover;
border: 1px solid rgba(255, 255, 255, 0.4);
}
.details { display: flex; flex-direction: column; gap: 8px; }
.detail-item { display: flex; flex-direction: column; }
.detail-item .label, .detail-item .value {
font-size: 13px;
font-weight: 500;
color: var(--text-color);
}
.detail-item .label {
color: var(--label-color);
white-space: pre-wrap;
}
.signature-placeholder {
width: 100px;
height: 45px;
object-fit: contain;
margin-top: 0;
}

.status-banner-wrapper {
background: var(--banner-background-soft);
overflow: hidden;
white-space: nowrap;
padding: 5px 0;
flex-shrink: 0;
}
.status-banner {
display: flex;
width: max-content;
animation: marquee 12s linear infinite;
}
@keyframes marquee {
0% { transform: translateX(0); }
100% { transform: translateX(-50%); }
}
.status-banner span {
padding-right: 8px;
font-size: 13px;
font-weight: 600;
white-space: nowrap;
}

.info-section { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; justify-content: flex-end; }
.name-section {
display: flex;
justify-content: space-between;
align-items: flex-end;
min-width: 0;
}
.full-name { display: flex; flex-direction: column; min-width: 0; }
.name-part {
font-size: 24px;
font-weight: 600;
line-height: 1.2;
word-break: break-word;
}
.more-options {
width: 24px;
height: 24px;
background-color: #2c2c2e;
border-radius: 50%;
display: flex;
justify-content: center;
align-items: center;
flex-shrink: 0;
margin-left: 10px;
margin-bottom: 2px;
}
.more-options svg {
width: 14px;
height: 14px;
fill: #fff;
}

.page-indicator-container {
position: absolute;
bottom: 95px;
left: 50%;
transform: translateX(-50%);
width: 100%;
max-width: 400px;
padding: 20px 0;
}
.page-indicator { display: flex; justify-content: center; gap: 8px; }
.dot {
width: 9px;
height: 9px;
background-color: rgba(255, 255, 255, 0.6);
border-radius: 50%;
transition: background-color 0.3s ease;
}
.dot.active { background-color: rgba(255, 255, 255, 1); }

/* --- СТИЛІ НАВІГАЦІЇ --- */
.bottom-nav { display: flex; justify-content: space-around; background-color: var(--nav-background); padding: 8px 0 20px 0; position: fixed; bottom: 0; left: 0; width: 100%; border-top-left-radius: 20px; border-top-right-radius: 20px; z-index: 100; }
.nav-item { display: flex; flex-direction: column; align-items: center; text-decoration: none; color: var(--nav-text-color); gap: 4px; padding: 0 10px; cursor: pointer; }
.nav-icon { width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; }
.nav-label { font-size: 10px; }
.nav-item.active .nav-label { color: var(--nav-active-color); }
.nav-icon .icon-inactive { display: block; }
.nav-icon .icon-active { display: none; }
.nav-item.active .nav-icon .icon-inactive { display: none; }
.nav-item.active .nav-icon .icon-active { display: block; }

#update-notification { position: fixed; bottom: 90px; left: 50%; transform: translateX(-50%); background-color: #28a745; color: white; padding: 10px 20px; border-radius: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); z-index: 200; cursor: pointer; font-size: 14px; font-weight: 500; display: none; }

/* --- СТИЛІ ЗВОРОТУ КАРТКИ --- */
.code-timer { font-size: 15px; color: #555; font-weight: 500; }
.code-display-area { width: 100%; display: flex; justify-content: center; align-items: center; flex-grow: 1; }
.code-display-area img { width: 220px; height: 220px; }
.code-display-item { display: block; }
.code-display-item.hidden { display: none; }
.barcode-container { display: flex; flex-direction: column; align-items: center; gap: 15px; }
.barcode-svg { width: 250px; height: 80px; }
.barcode-numbers { font-family: 'SF Mono', 'Menlo', 'Courier New', monospace; font-size: 18px; letter-spacing: 4px; color: #000; font-weight: 500; }
.lottie-loader {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
width: 100%;
height: 100%;
z-index: 10;
display: none; /* Спочатку приховано */
}

.flip-card-back .back-content {
display: none; /* Спочатку приховано */
flex-direction: column;
align-items: center;
justify-content: space-around;
height: 100%;
width: 100%;
}

.passport-switcher { display: flex; justify-content: center; gap: 40px; width: 100%; align-items: flex-start; padding-bottom: 10px;}
.passport-switcher-btn { display: flex; flex-direction: column; align-items: center; gap: 10px; background: none; border: none; cursor: pointer; padding: 0; font-family: 'Manrope', sans-serif;}
.passport-switcher-icon { width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: background-color 0.2s ease;}
.passport-switcher-label { font-size: 16px; font-weight: 500; color: #000;}
.passport-switcher-btn .passport-switcher-icon { background-color: #f0f0f0; }
.passport-switcher-btn.active .passport-switcher-icon { background-color: #000; }
.passport-switcher-btn .passport-switcher-icon svg { width: 28px; height: 28px; fill: #000; }
.passport-switcher-btn.active .passport-switcher-icon svg { fill: #fff; }
.passport-switcher-btn #barcode-icon-inactive path { stroke: #000; }

.simple-qr-back { gap: 15px; justify-content: center; }
.simple-qr-back h3 { font-weight: 700; font-size: 16px; margin-top: 10px; }
.simple-qr-back img { width: 240px; height: 240px; }

/* --- СТИЛІ ДЛЯ СТОРІНКИ МЕНЮ --- */
#page-menu {
background-color: var(--menu-bg-color);
padding: 20px 16px 100px 16px;
overflow-y: auto;
visibility: hidden;
opacity: 0;
transition: opacity 0.4s ease-in-out;
display: block;
}
#page-menu.active {
visibility: visible;
opacity: 1;
}
.menu-header {
padding: 0 4px 10px 4px;
}
.menu-header h1 {
font-size: 34px;
font-weight: 700;
margin-bottom: 5px;
color: #000;
}
.menu-header p {
font-size: 15px;
color: #555;
}
.menu-section {
background-color: var(--menu-item-bg);
border-radius: 14px;
overflow: hidden;
margin-bottom: var(--menu-section-spacing);
box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
.menu-item {
display: flex;
align-items: center;
padding: 14px 16px;
color: var(--menu-item-text);
font-size: 17px;
font-weight: 500;
border-bottom: 1px solid var(--menu-item-border);
cursor: pointer;
}
.menu-item:last-child {
border-bottom: none;
}
.menu-item:active {
background-color: #f0f0f0;
}
.menu-item-icon {
width: 24px;
height: 24px;
display: flex;
justify-content: center;
align-items: center;
margin-right: 16px;
flex-shrink: 0;
}
.menu-item-icon svg {
width: 100%;
height: 100%;
object-fit: contain;
}

/* --- СТИЛІ ДЛЯ SIGNATURE PAD --- */
#signature-pad-container {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: #f0f2f5;
display: flex;
flex-direction: column;
z-index: 1000;
transform: translateY(100%);
transition: transform 0.3s ease-out;
}
#signature-pad-container.visible {
transform: translateY(0);
}
.signature-pad-header {
display: flex;
justify-content: space-between;
align-items: center;
padding: 15px 20px;
background-color: #fff;
box-shadow: 0 1px 3px rgba(0,0,0,0.1);
z-index: 10;
}
.signature-pad-header h2 {
font-size: 20px;
font-weight: 600;
}
.signature-pad-close {
font-size: 16px;
color: #007aff;
cursor: pointer;
}
.signature-canvas-wrapper {
flex-grow: 1;
display: flex;
justify-content: center;
align-items: center;
padding: 20px;
overflow: hidden;
}
#signature-canvas {
background-color: #fff;
border: 1px solid #ddd;
border-radius: 12px;
touch-action: none;
max-width: 100%;
max-height: 100%;
}
.signature-pad-actions {
display: flex;
justify-content: space-around;
padding: 15px 20px;
background-color: #fff;
border-top: 1px solid #eee;
}
.signature-pad-btn {
padding: 12px 25px;
border: none;
border-radius: 10px;
font-size: 16px;
font-weight: 600;
cursor: pointer;
}
.signature-pad-btn.clear {
background-color: #e0e0e0;
color: #333;
}
.signature-pad-btn.save {
background-color: #007aff;
color: #fff;
}
</style>
</head>
<body>
<!-- СТАРТОВИЙ ЕКРАН -->
<div id="splash-screen">
<div class="splash-content">
<h1>Привіт 👋</h1>
</div>
<div class="lottie-container">
<lottie-player id="lottie-player" src="splash_cropped.json" autoplay style="width:240px;"></lottie-player>
</div>
</div>
<!-- ЕКРАН ВВОДУ ПАРОЛЮ -->
<div id="login-screen">
<h2 class="login-title">Код для входу</h2>
<div class="passcode-dots">
<div class="passcode-dot"></div>
<div class="passcode-dot"></div>
<div class="passcode-dot"></div>
<div class="passcode-dot"></div>
</div>
<div class="keypad">
<button class="keypad-btn">1</button>
<button class="keypad-btn">2</button>
<button class="keypad-btn">3</button>
<button class="keypad-btn">4</button>
<button class="keypad-btn">5</button>
<button class="keypad-btn">6</button>
<button class="keypad-btn">7</button>
<button class="keypad-btn">8</button>
<button class="keypad-btn">9</button>
<button class="keypad-btn icon" id="fingerprint-btn">
<img src="https://static.thenounproject.com/png/1238269-200.png" alt="Відбиток">
</button>
<button class="keypad-btn">0</button>
<button class="keypad-btn icon" id="backspace-btn">
<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7.50006 5.5L4.05262 10.7909C3.71387 11.3107 3.69732 11.9772 4.00984 12.5133L7.50006 18.5H18.8588C19.7651 18.5 20.4999 17.7653 20.4999 16.8589V7.14109C20.4999 6.23474 19.7651 5.5 18.8588 5.5H7.50006Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M10 8.5L17 15.5" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M10 15.5L16.9303 8.49996" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</button>
</div>
<div class="forgot-password">Не пам’ятаю код для входу</div>
</div>
<!-- ОСНОВНИЙ ДОДАТОК -->
<div class="app-container">
<main class="content">
<div class="page" id="page-feed">
<div class="placeholder-page"><h1>Стрічка</h1></div>
</div>
<div class="page" id="page-docs">
<div>
<div class="slider-container">
<div class="slider-wrapper">
<!-- СЛАЙД 1: ЄДОКУМЕНТ -->
<div class="slide">
<div class="flip-card">
<div class="flip-card-inner">
<div class="flip-card-front">
<div class="document-container">
<div class="document-content">
<h1 class="document-title">єДокумент</h1>
<div class="personal-info">
<div class="photo">
<img src="./pasport.png" alt="Фото" loading="lazy">
</div>
<div class="details">
<div class="detail-item">
<span class="label">Дата<br>народження:</span>
<span class="value">29.07.2005</span>
</div>
<div class="detail-item">
<span class="label">РНОКПП:</span>
<span class="value">3856163250</span>
</div>
</div>
</div>
</div>
<div class="status-banner-wrapper">
<div class="status-banner">
<span>А ми нашу славну Україну, гей, гей, розвеселимо!</span>
<span>А ми нашу славну Україну, гей, гей, розвеселимо!</span>
</div>
</div>
<div class="info-section">
<div class="name-section">
<div class="full-name">
<span class="name-part">Іванов</span>
<span class="name-part">Іван</span>
<span class="name-part">Іванович</span>
</div>
<div class="more-options">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
</div>
</div>
</div>
</div>
</div>
<div class="flip-card-back simple-qr-back">
<div class="lottie-loader"></div>
<div class="back-content">
<h3>QR-код дійсний</h3>
<img class="qr-code" src="" alt="QR">
</div>
</div>
</div>
</div>
</div>
<!-- СЛАЙД 2: ПАСПОРТ ГРОМАДЯНИНА УКРАЇНИ (З ПІДПИСОМ) -->
<div class="slide" id="passport-ukraine-slide">
<div class="flip-card">
<div class="flip-card-inner">
<div class="flip-card-front">
<div class="document-container">
<div class="document-content">
<h1 class="document-title">Паспорт громадянина<br>України</h1>
<div class="personal-info">
<div class="photo">
<img src="./pasport.png" alt="Фото" loading="lazy">
</div>
<div class="details">
<div class="detail-item">
<span class="label">Дата<br>народження:</span>
<span class="value">29.07.2005</span>
</div>
<div class="detail-item">
<span class="label">Номер:</span>
<span class="value">013407632</span>
</div>
<img id="passport-signature-image" class="signature-placeholder" src="" alt="Підпис" style="display: none;">
</div>
</div>
</div>
<div class="status-banner-wrapper">
<div class="status-banner">
<span>А ми нашу славну Україну, гей, гей, розвеселимо!</span>
<span>А ми нашу славну Україну, гей, гей, розвеселимо!</span>
</div>
</div>
<div class="info-section">
<div class="name-section">
<div class="full-name">
<span class="name-part">Іванов</span>
<span class="name-part">Іван</span>
<span class="name-part">Іванович</span>
</div>
<div class="more-options">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
</div>
</div>
</div>
</div>
</div>
<div class="flip-card-back">
<div class="lottie-loader"></div>
<div class="back-content">
<div class="code-timer">Код діятиме ще 3:00 хв</div>
<div class="code-display-area">
<div class="code-display-item" data-type="qr">
<img class="qr-code" src="" alt="QR">
</div>
<div class="code-display-item hidden" data-type="barcode">
<div class="barcode-container">
<svg class="barcode-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 250 80">
<g fill="#000">
<rect x="0" y="0" width="3" height="80"/> <rect x="5" y="0" width="2" height="80"/> <rect x="9" y="0" width="5" height="80"/> <rect x="16" y="0" width="2" height="80"/> <rect x="20" y="0" width="4" height="80"/> <rect x="26" y="0" width="2" height="80"/> <rect x="30" y="0" width="3" height="80"/> <rect x="35" y="0" width="5" height="80"/> <rect x="42" y="0" width="2" height="80"/> <rect x="46" y="0" width="3" height="80"/> <rect x="51" y="0" width="3" height="80"/> <rect x="56" y="0" width="4" height="80"/> <rect x="62" y="0" width="2" height="80"/> <rect x="66" y="0" width="5" height="80"/> <rect x="73" y="0" width="2" height="80"/> <rect x="77" y="0" width="4" height="80"/> <rect x="83" y="0" width="3" height="80"/> <rect x="88" y="0" width="2" height="80"/> <rect x="92" y="0" width="5" height="80"/> <rect x="99" y="0" width="3" height="80"/> <rect x="104" y="0" width="2" height="80"/> <rect x="108" y="0" width="4" height="80"/> <rect x="114" y="0" width="3" height="80"/> <rect x="119" y="0" width="5" height="80"/> <rect x="126" y="0" width="2" height="80"/> <rect x="130" y="0" width="3" height="80"/> <rect x="135" y="0" width="4" height="80"/> <rect x="141" y="0" width="2" height="80"/> <rect x="145" y="0" width="5" height="80"/> <rect x="152" y="0" width="3" height="80"/> <rect x="157" y="0" width="2" height="80"/> <rect x="161" y="0" width="4" height="80"/> <rect x="167" y="0" width="3" height="80"/> <rect x="172" y="0" width="5" height="80"/> <rect x="179" y="0" width="2" height="80"/> <rect x="183" y="0" width="4" height="80"/> <rect x="189" y="0" width="2" height="80"/> <rect x="193" y="0" width="3" height="80"/> <rect x="198" y="0" width="5" height="80"/> <rect x="205" y="0" width="2" height="80"/> <rect x="209" y="0" width="4" height="80"/> <rect x="215" y="0" width="3" height="80"/> <rect x="220" y="0" width="2" height="80"/> <rect x="224" y="0" width="5" height="80"/> <rect x="231" y="0" width="3" height="80"/> <rect x="236" y="0" width="2" height="80"/> <rect x="240" y="0" width="4" height="80"/> <rect x="246" y="0" width="3" height="80"/>
</g>
</svg>
<div class="barcode-numbers">
<span>5373</span> <span>2728</span> <span>73494</span>
</div>
</div>
</div>
</div>
<div class="passport-switcher">
<button class="passport-switcher-btn active" data-type="qr">
<div class="passport-switcher-icon">
<svg viewBox="0 0 24 24"><path d="M3 11h8V3H3v8zm2-6h4v4H5V5zM3 21h8v-8H3v8zm2-6h4v4H5v-4zM13 3v8h8V3h-8zm6 6h-4V5h4v4zM13 13h2v2h-2zM15 15h2v2h-2zM13 17h2v2h-2zM15 19h2v2h-2zM17 17h2v2h-2zM19 15h2v2h-2zM17 13h2v2h-2zM19 19h2v2h-2z"/></svg>
</div>
<span class="passport-switcher-label">QR-код</span>
</button>
<button class="passport-switcher-btn" data-type="barcode">
<div class="passport-switcher-icon">
<svg id="barcode-icon-inactive" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 5V19M9 5V19M12 5V19M15 5V19M19 5V19" stroke-width="2.5" stroke-linecap="round"/></svg>
</div>
<span class="passport-switcher-label">Штрих-код</span>
</button>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- СЛАЙД 3: ЗАКОРДОННИЙ ПАСПОРТ -->
<div class="slide">
<div class="flip-card">
<div class="flip-card-inner">
<div class="flip-card-front">
<div class="document-container">
<div class="document-content">
<h1 class="document-title">Паспорт для виїзду<br>за кордон</h1>
<div class="personal-info">
<div class="photo">
<img src="./pasport.png" alt="Фото" loading="lazy">
</div>
<div class="details">
<div class="detail-item">
<span class="label">Document No.</span>
<span class="value">EE987654</span>
</div>
<div class="detail-item">
<span class="label">Date of expiry</span>
<span class="value">14.08.2032</span>
</div>
<div class="detail-item">
<span class="label">Nationality</span>
<span class="value">UKRAINE</span>
</div>
</div>
</div>
</div>
<div class="status-banner-wrapper">
<div class="status-banner">
<span>А ми нашу славну Україну, гей, гей, розвеселимо!</span>
<span>А ми нашу славну Україну, гей, гей, розвеселимо!</span>
</div>
</div>
<div class="info-section">
<div class="name-section">
<div class="full-name">
<span class="name-part">IVANOV</span>
<span class="name-part">IVAN</span>
</div>
<div class="more-options">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
</div>
</div>
</div>
</div>
</div>
<div class="flip-card-back">
<div class="lottie-loader"></div>
<div class="back-content">
<div class="code-timer">Код діятиме ще 3:00 хв</div>
<div class="code-display-area">
<img class="qr-code" src="" alt="QR">
</div>
<div class="passport-switcher" style="padding-bottom: 70px;"> <!-- Placeholder -->
</div>
</div>
</div>
</div>
</div>
</div>
<!-- СЛАЙД 4: КАРТКА ПЛАТНИКА ПОДАТКІВ -->
<div class="slide">
<div class="flip-card">
<div class="flip-card-inner">
<div class="flip-card-front">
<div class="document-container">
<div class="document-content" style="padding-bottom: 20px;">
<h1 class="document-title">Картка платника<br>податків</h1>
<div class="personal-info" style="margin-bottom: 20px;">
<div class="details" style="gap: 15px;">
<div class="detail-item">
<span class="label">Прізвище</span>
<span class="value" style="font-size: 18px; font-weight: 600;">Іванов</span>
</div>
<div class="detail-item">
<span class="label">Ім'я та по батькові</span>
<span class="value" style="font-size: 18px; font-weight: 600;">Іван Іванович</span>
</div>
<div class="detail-item">
<span class="label">Дата народження</span>
<span class="value" style="font-size: 18px; font-weight: 600;">29.07.2005</span>
</div>
</div>
</div>
</div>
<div style="background: #fff; padding: 20px; border-radius: 0 0 24px 24px; flex-grow: 1; display: flex; flex-direction: column; justify-content: center; align-items: center;">
<span class="label" style="align-self: flex-start; margin-left: 5px; font-size: 14px;">РНОКПП</span>
<span class="value" style="font-family: 'SF Mono', monospace; font-size: 28px; letter-spacing: 2px; font-weight: 600; margin-top: 5px;">3856163250</span>
</div>
</div>
</div>
<div class="flip-card-back">
<div class="lottie-loader"></div>
<div class="back-content">
<div class="code-timer">Код діятиме ще 3:00 хв</div>
<div class="code-display-area">
<img class="qr-code" src="" alt="QR">
</div>
<div class="passport-switcher" style="padding-bottom: 70px;"> <!-- Placeholder -->
</div>
</div>
</div>
</div>
</div>
</div>
<!-- СЛАЙД 5 -->
<div class="slide"><div class="document-container empty-card">Додати документ</div></div>
</div>
</div>
</div>
<div class="page-indicator-container">
<div class="page-indicator">
<!-- Дотси будуть оновлюватися динамічно -->
</div>
</div>
</div>
<div class="page" id="page-services">
<div class="placeholder-page"><h1>Сервіси</h1></div>
</div>
<div class="page" id="page-menu">
<div class="menu-header">
<h1>Меню</h1>
<p>Версія Дії: 4.13.1.1488</p>
</div>
<div class="menu-sections">
<div class="menu-section">
<div class="menu-item" id="menu-notifications">
<div class="menu-item-icon">
<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 7.25L12 13.25L21.5 7.25M4.5 5.5H19.5C20.6046 5.5 21.5 6.39543 21.5 7.5V16.5C21.5 17.6046 20.6046 18.5 19.5 18.5H4.5C3.39543 18.5 2.5 17.6046 2.5 16.5V7.5C2.5 6.39543 3.39543 5.5 4.5 5.5Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
</div>
<span>Повідомлення</span>
</div>
</div>
<div class="menu-section">
<div class="menu-item" id="menu-diia-signature">
<div class="menu-item-icon">
<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 10.5C14.5 11.8807 13.3807 13 12 13C10.6193 13 9.5 11.8807 9.5 10.5C9.5 9.11929 10.6193 8 12 8C13.3807 8 14.5 9.11929 14.5 10.5ZM14.5 10.5H19.5L21.5 12.5V15.5H19.5M8.5 19.5L5.5 16.5M5.5 16.5L2.5 19.5M5.5 16.5V8.5C5.5 5.46243 7.96243 3 11 3H13C14.0587 3 15.022 3.41443 15.7231 4.09318" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
</div>
<span>Дія.Підпис</span>
</div>
<div class="menu-item" id="menu-signature-history">
<div class="menu-item-icon">
<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2.5C12 2.5 5.5 2.5 4.5 2.5C3.39543 2.5 2.5 3.39543 2.5 4.5V19.5C2.5 20.6046 3.39543 21.5 4.5 21.5H19.5C20.6046 21.5 21.5 20.6046 21.5 19.5V8.5C21.5 5.5 21.5 5.5 18.5 5.5H12V2.5Z" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 12.5H17.5M12 16.5H17.5M12 8.5H14.5M8.5 12.5H9.5M8.5 16.5H9.5M16.5 2.5L18.5 4.5L16.5 6.5" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
</div>
<span>Історія підписань</span>
</div>
</div>
<div class="menu-section">
<div class="menu-item" id="menu-settings">
<div class="menu-item-icon">
<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 15.5C13.933 15.5 15.5 13.933 15.5 12C15.5 10.067 13.933 8.5 12 8.5C10.067 8.5 8.5 10.067 8.5 12C8.5 13.933 10.067 15.5 12 15.5Z" stroke="#000000" stroke-width="1.5"/><path d="M19.5 12C19.5 12.6822 19.4312 13.3512 19.3 14M16 19.3C15.3512 19.4312 14.6822 19.5 14 19.5C13.3178 19.5 12.6488 19.4312 12 19.3M4.5 12C4.5 11.3178 4.56875 10.6488 4.7 10M8 4.7C8.64875 4.56875 9.31775 4.5 10 4.5C10.6822 4.5 11.3512 4.56875 12 4.7M19.3 10C19.4312 10.6488 19.5 11.3178 19.5 12M19.3 14L21.5 15L20 17.5L17.5 17L16 19.3M12 4.7L11 2.5L8.5 4L8 4.7M4.7 10L2.5 11L4 13.5L6.5 13L4.7 10Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
</div>
<span>Налаштування</span>
</div>
<div class="menu-item" id="menu-update-app">
<div class="menu-item-icon">
<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 5.5V11.5M12 11.5L15.5 8M12 11.5L8.5 8" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M21.5 12C21.5 17.2467 17.2467 21.5 12 21.5C6.75329 21.5 2.5 17.2467 2.5 12C2.5 6.75329 6.75329 2.5 12 2.5C14.0753 2.5 16.0124 3.16591 17.5979 4.31971" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
</div>
<span>Оновити застосунок</span>
</div>
<div class="menu-item" id="menu-connected-devices">
<div class="menu-item-icon">
<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="6.5" y="2.5" width="11" height="19" rx="2" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><line x1="9.5" y1="18.5" x2="14.5" y2="18.5" stroke="#000000" stroke-width="1.5" stroke-linecap="round"/></svg>
</div>
<span>Підключені пристрої</span>
</div>
</div>
<div class="menu-section">
<div class="menu-item" id="menu-support">
<div class="menu-item-icon">
<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.5 12.5H15.5M8.5 8.5H15.5M12 21.5C17.2467 21.5 21.5 17.2467 21.5 12C21.5 6.75329 17.2467 2.5 12 2.5C6.75329 2.5 2.5 6.75329 2.5 12C2.5 14.0363 3.23023 15.892 4.49255 17.3387C4.77611 17.6895 4.54273 18.2313 4.10396 18.136C2.49392 17.7915 2.5 17.5 2.5 17.5" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
</div>
<span>Служба підтримки</span>
</div>
<div class="menu-item" id="menu-copy-device-number">
<div class="menu-item-icon">
<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 16.5C5.5 17.6046 6.39543 18.5 7.5 18.5H13.5M5.5 16.5V7.5C5.5 6.39543 6.39543 5.5 7.5 5.5H16.5C17.6046 5.5 18.5 6.39543 18.5 7.5V13.5M5.5 16.5H4.5C3.39543 16.5 2.5 15.6046 2.5 14.5V4.5C2.5 3.39543 3.39543 2.5 4.5 2.5H14.5C15.6046 2.5 16.5 3.39543 16.5 4.5V5.5" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
</div>
<span>Копіювати номер пристрою</span>
</div>
<div class="menu-item" id="menu-faq">
<div class="menu-item-icon">
<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 16.5V16.51M12 13.5C12 12.2146 12.7842 11.2365 14 10.5C15.2158 9.76354 16 8.78544 16 7.5C16 5.01472 14.2091 3 12 3C9.79086 3 8 5.01472 8 7.5" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 21.5C17.2467 21.5 21.5 17.2467 21.5 12C21.5 6.75329 17.2467 2.5 12 2.5C6.75329 2.5 2.5 6.75329 2.5 12C2.5 17.2467 6.75329 21.5 12 21.5Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
</div>
<span>Питання та відповіді</span>
</div>
</div>
</div>
</div>
</main>
<div id="update-notification">Доступне оновлення. Оновити?</div>
<nav class="bottom-nav">
<div class="nav-item" data-page="page-feed">
<div class="nav-icon">
<svg class="icon-inactive" width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.99986 2.61536H12.9999C15.8283 2.61536 17.2425 2.61536 18.1212 3.49404C18.9999 4.37272 18.9999 5.78693 18.9999 8.61536V15.6154V20.6152C18.9999 21.7199 19.8954 22.6154 21 22.6154H6.99986C4.17143 22.6154 2.75722 22.6154 1.87854 21.7367C0.999861 20.858 0.999861 19.4438 0.999861 16.6154V8.61536C0.999861 5.78693 0.999861 4.37272 1.87854 3.49404C2.75722 2.61536 4.17143 2.61536 6.99986 2.61536Z" stroke="white" stroke-width="1.5"/><path d="M19 20.6154V13.6154H21C22.1046 13.6154 23 14.5108 23 15.6154V20.6154C23 21.7199 22.1046 22.6154 21 22.6154C19.8954 22.6154 19 21.7199 19 20.6154Z" stroke="white" stroke-width="1.5"/><rect x="4.5" y="17.1154" width="11" height="1.5" rx="0.5" fill="white"/><rect width="10" height="7" rx="1" transform="matrix(-1 0 0 1 15 6.61536)" stroke="white" stroke-width="1.5"/></svg>
<svg class="icon-active" width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.99986 2.61536H12.9999C15.8283 2.61536 17.2425 2.61536 18.1212 3.49404C18.9999 4.37272 18.9999 5.78693 18.9999 8.61536V15.6154V20.6152C18.9999 21.7199 19.8954 22.6154 21 22.6154H6.99986C4.17143 22.6154 2.75722 22.6154 1.87854 21.7367C0.999861 20.858 0.999861 19.4438 0.999861 16.6154V8.61536C0.999861 5.78693 0.999861 4.37272 1.87854 3.49404C2.75722 2.61536 4.17143 2.61536 6.99986 2.61536Z" fill="white" stroke="white" stroke-width="1.5"/><path d="M19 20.6154V13.6154H21C22.1046 13.6154 23 14.5108 23 15.6154V20.6154C23 21.7199 22.1046 22.6154 21 22.6154C19.8954 22.6154 19 21.7199 19 20.6154Z" stroke="white" stroke-width="1.5"/><rect x="4.5" y="17.1154" width="11" height="1.5" rx="0.5" fill="black"/><rect width="10" height="7" rx="1" transform="matrix(-1 0 0 1 15 6.61536)" stroke="black" stroke-width="1.5"/></svg>
</div>
<span class="nav-label">Стрічка</span>
</div>
<div class="nav-item" data-page="page-docs">
<div class="nav-icon">
<svg class="icon-inactive" width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2.75" y="2.36536" width="18.5" height="20.5" rx="3.25" stroke="white" stroke-width="1.5"/><path d="M6 18.6154C6 18.3392 6.22386 18.1154 6.5 18.1154H14.5C14.7761 18.1154 15 18.3392 15 18.6154V19.1154C15 19.3915 14.7761 19.6154 14.5 19.6154H6.5C6.22386 19.6154 6 19.3915 6 19.1154V18.6154Z" fill="white"/><path d="M6 15.1154C6 14.8392 6.22386 14.6154 6.5 14.6154H17.5C17.7761 14.6154 18 14.8392 18 15.1154V15.6154C18 15.8915 17.7761 16.1154 17.5 16.1154H6.5C6.22386 16.1154 6 15.8915 6 15.6154V15.1154Z" fill="white"/><mask id="path-4-inside-1_13657_22140" fill="white"><rect x="6" y="5.61536" width="7" height="7" rx="1"/></mask><rect x="6" y="5.61536" width="7" height="7" rx="1" stroke="white" stroke-width="3" mask="url(#path-4-inside-1_13657_22140)"/></svg>
<svg class="icon-active" width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2.75" y="2.36536" width="18.5" height="20.5" rx="3.25" fill="white" stroke="white" stroke-width="1.5"/><path d="M6 18.6154C6 18.3392 6.22386 18.1154 6.5 18.1154H14.5C14.7761 18.1154 15 18.3392 15 18.6154V19.1154C15 19.3915 14.7761 19.6154 14.5 19.6154H6.5C6.22386 19.6154 6 19.3915 6 19.1154V18.6154Z" fill="black"/><path d="M6 15.1154C6 14.8392 6.22386 14.6154 6.5 14.6154H17.5C17.7761 14.6154 18 14.8392 18 15.1154V15.6154C18 15.8915 17.7761 16.1154 17.5 16.1154H6.5C6.22386 16.1154 6 15.8915 6 15.6154V15.1154Z" fill="black"/><mask id="path-4-inside-1_13657_22158" fill="white"><rect x="6" y="5.61536" width="7" height="7" rx="1"/></mask><rect x="6" y="5.61536" width="7" height="7" rx="1" stroke="black" stroke-width="3" mask="url(#path-4-inside-1_13657_22158)"/></svg>
</div>
<span class="nav-label">Документи</span>
</div>
<div class="nav-item" data-page="page-services">
<div class="nav-icon">
<svg class="icon-inactive" width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="path-1-inside-1_13657_22172" fill="white"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 23.6154C5.84037 23.6154 4.18232 23.3034 2.74717 21.8682C1.30306 20.4241 1 18.775 1 12.6154C1 6.45573 1.31199 4.80661 2.74717 3.36253C4.18232 1.92735 5.84037 1.61536 12 1.61536C18.1596 1.61536 19.8177 1.92735 21.2528 3.36253C22.6969 4.80661 23 6.45573 23 12.6154C23 18.775 22.6969 20.4241 21.2528 21.8682C19.8177 23.3034 18.1596 23.6154 12 23.6154Z"/></mask><path d="M2.74717 21.8682L3.80785 20.8075L3.80782 20.8075L2.74717 21.8682ZM2.74717 3.36253L1.68649 2.30188L1.68324 2.30515L2.74717 3.36253ZM21.2528 3.36253L20.1922 4.42318L20.1922 4.42319L21.2528 3.36253ZM21.2528 21.8682L20.1922 20.8075L20.1922 20.8075L21.2528 21.8682ZM12 22.1154C8.90493 22.1154 7.08603 22.0336 5.88008 21.806C4.78166 21.5987 4.2908 21.2905 3.80785 20.8075L1.6865 22.9288C2.63869 23.881 3.69443 24.4465 5.32373 24.7539C6.84551 25.0411 8.93544 25.1154 12 25.1154V22.1154ZM3.80782 20.8075C3.31966 20.3194 3.01222 19.8284 2.8062 18.7329C2.57961 17.528 2.5 15.7117 2.5 12.6154H-0.5C-0.5 15.6786 -0.428084 17.7667 -0.142115 19.2873C0.164424 20.9173 0.730574 21.9729 1.68652 22.9289L3.80782 20.8075ZM2.5 12.6154C2.5 9.52026 2.58179 7.70371 2.80933 6.49901C3.01645 5.40245 3.32467 4.90936 3.81111 4.4199L1.68324 2.30515C0.734497 3.25978 0.169128 4.31329 -0.138544 5.94221C-0.425792 7.46301 -0.5 9.55083 -0.5 12.6154H2.5ZM3.80785 4.42318C4.2908 3.94021 4.78166 3.63203 5.88008 3.42473C7.08603 3.19714 8.90493 3.11536 12 3.11536V0.115356C8.93544 0.115356 6.84551 0.189572 5.32373 0.476771C3.69443 0.784262 2.63869 1.34967 1.6865 2.30188L3.80785 4.42318ZM12 3.11536C15.0951 3.11536 16.914 3.19714 18.1199 3.42473C19.2183 3.63203 19.7092 3.94021 20.1922 4.42318L22.3135 2.30188C21.3613 1.34967 20.3056 0.784261 18.6763 0.476771C17.1545 0.189572 15.0646 0.115356 12 0.115356V3.11536ZM20.1922 4.42319C20.6803 4.91135 20.9878 5.40236 21.1938 6.49785C21.4204 7.70272 21.5 9.51898 21.5 12.6154H24.5C24.5 9.55211 24.4281 7.464 24.1421 5.94338C23.8356 4.31338 23.2694 3.25779 22.3135 2.30187L20.1922 4.42319ZM21.5 12.6154C21.5 15.7117 21.4204 17.528 21.1938 18.7329C20.9878 19.8284 20.6803 20.3194 20.1922 20.8075L22.3135 22.9288C23.2694 21.9729 23.8356 20.9173 24.1421 19.2873C24.4281 17.7667 24.5 15.6786 24.5 12.6154H21.5ZM20.1922 20.8075C19.7092 21.2905 19.2183 21.5987 18.1199 21.806C16.914 22.0336 15.0951 22.1154 12 22.1154V25.1154C15.0646 25.1154 17.1545 25.0411 18.6763 24.7539C20.3056 24.4465 21.3613 23.881 22.3135 22.9288L20.1922 20.8075Z" fill="white" mask="url(#path-1-inside-1_13657_22172)"/><path d="M14.1433 5.61549C14.1302 5.61651 14.1171 5.61817 14.1041 5.62046C14.0557 5.62707 14.0093 5.64237 13.9678 5.66544C13.9263 5.68851 13.8906 5.71885 13.8628 5.7546L7.39955 13.6136C7.36155 13.6611 7.33901 13.7169 7.33439 13.775C7.32976 13.8331 7.34323 13.8912 7.37333 13.9429C7.40342 13.9947 7.44899 14.0381 7.50506 14.0685C7.56113 14.099 7.62555 14.1151 7.6913 14.1154H11.1418L9.32393 19.1885C9.29398 19.2613 9.29508 19.3413 9.32702 19.4134C9.35895 19.4856 9.41953 19.5449 9.49737 19.5803C9.57521 19.6156 9.66495 19.6246 9.74976 19.6056C9.83456 19.5865 9.90858 19.5407 9.95792 19.4767L16.6007 11.6171C16.6387 11.5696 16.6613 11.5138 16.6659 11.4557C16.6705 11.3976 16.6571 11.3396 16.627 11.2878C16.5969 11.236 16.5513 11.1926 16.4952 11.1622C16.4392 11.1318 16.3748 11.1156 16.309 11.1154H12.8417L14.4968 6.02785C14.5138 5.9795 14.5175 5.92825 14.5076 5.87837C14.4977 5.8285 14.4745 5.78143 14.44 5.74109C14.4054 5.70076 14.3604 5.66831 14.3088 5.64647C14.2573 5.62462 14.2005 5.614 14.1433 5.61549Z" fill="white"/></svg>
<svg class="icon-active" width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="path-1-inside-1_13657_22184" fill="white"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 23.6154C5.84037 23.6154 4.18232 23.3034 2.74717 21.8682C1.30306 20.4241 1 18.775 1 12.6154C1 6.45573 1.31199 4.80661 2.74717 3.36253C4.18232 1.92735 5.84037 1.61536 12 1.61536C18.1596 1.61536 19.8177 1.92735 21.2528 3.36253C22.6969 4.80661 23 6.45573 23 12.6154C23 18.775 22.6969 20.4241 21.2528 21.8682C19.8177 23.3034 18.1596 23.6154 12 23.6154Z"/></mask><path fill-rule="evenodd" clip-rule="evenodd" d="M12 23.6154C5.84037 23.6154 4.18232 23.3034 2.74717 21.8682C1.30306 20.4241 1 18.775 1 12.6154C1 6.45573 1.31199 4.80661 2.74717 3.36253C4.18232 1.92735 5.84037 1.61536 12 1.61536C18.1596 1.61536 19.8177 1.92735 21.2528 3.36253C22.6969 4.80661 23 6.45573 23 12.6154C23 18.775 22.6969 20.4241 21.2528 21.8682C19.8177 23.3034 18.1596 23.6154 12 23.6154Z" fill="white"/><path d="M2.74717 21.8682L3.80785 20.8075L3.80782 20.8075L2.74717 21.8682ZM2.74717 3.36253L1.68649 2.30188L1.68324 2.30515L2.74717 3.36253ZM21.2528 3.36253L20.1922 4.42318L20.1922 4.42319L21.2528 3.36253ZM21.2528 21.8682L20.1922 20.8075L20.1922 20.8075L21.2528 21.8682ZM12 22.1154C8.90493 22.1154 7.08603 22.0336 5.88008 21.806C4.78166 21.5987 4.2908 21.2905 3.80785 20.8075L1.6865 22.9288C2.63869 23.881 3.69443 24.4465 5.32373 24.7539C6.84551 25.0411 8.93544 25.1154 12 25.1154V22.1154ZM3.80782 20.8075C3.31966 20.3194 3.01222 19.8284 2.8062 18.7329C2.57961 17.528 2.5 15.7117 2.5 12.6154H-0.5C-0.5 15.6786 -0.428084 17.7667 -0.142115 19.2873C0.164424 20.9173 0.730574 21.9729 1.68652 22.9289L3.80782 20.8075ZM2.5 12.6154C2.5 9.52026 2.58179 7.70371 2.80933 6.49901C3.01645 5.40245 3.32467 4.90936 3.81111 4.4199L1.68324 2.30515C0.734497 3.25978 0.169128 4.31329 -0.138544 5.94221C-0.425792 7.46301 -0.5 9.55083 -0.5 12.6154H2.5ZM3.80785 4.42318C4.2908 3.94021 4.78166 3.63203 5.88008 3.42473C7.08603 3.19714 8.90493 3.11536 12 3.11536V0.115356C8.93544 0.115356 6.84551 0.189572 5.32373 0.476771C3.69443 0.784262 2.63869 1.34967 1.6865 2.30188L3.80785 4.42318ZM12 3.11536C15.0951 3.11536 16.914 3.19714 18.1199 3.42473C19.2183 3.63203 19.7092 3.94021 20.1922 4.42318L22.3135 2.30188C21.3613 1.34967 20.3056 0.784261 18.6763 0.476771C17.1545 0.189572 15.0646 0.115356 12 0.115356V3.11536ZM20.1922 4.42319C20.6803 4.91135 20.9878 5.40236 21.1938 6.49785C21.4204 7.70272 21.5 9.51898 21.5 12.6154H24.5C24.5 9.55211 24.4281 7.464 24.1421 5.94338C23.8356 4.31338 23.2694 3.25779 22.3135 2.30187L20.1922 4.42319ZM21.5 12.6154C21.5 15.7117 21.4204 17.528 21.1938 18.7329C20.9878 19.8284 20.6803 20.3194 20.1922 20.8075L22.3135 22.9288C23.2694 21.9729 23.8356 20.9173 24.1421 19.2873C24.4281 17.7667 24.5 15.6786 24.5 12.6154H21.5ZM20.1922 20.8075C19.7092 21.2905 19.2183 21.5987 18.1199 21.806C16.914 22.0336 15.0951 22.1154 12 22.1154V25.1154C15.0646 25.1154 17.1545 25.0411 18.6763 24.7539C20.3056 24.4465 21.3613 23.881 22.3135 22.9288L20.1922 20.8075Z" fill="white" mask="url(#path-1-inside-1_13657_22184)"/><path d="M14.1433 5.61549C14.1302 5.61651 14.1171 5.61817 14.1041 5.62046C14.0557 5.62707 14.0093 5.64237 13.9678 5.66544C13.9263 5.68851 13.8906 5.71885 13.8628 5.7546L7.39955 13.6136C7.36155 13.6611 7.33901 13.7169 7.33439 13.775C7.32976 13.8331 7.34323 13.8912 7.37333 13.9429C7.40342 13.9947 7.44899 14.0381 7.50506 14.0685C7.56113 14.099 7.62555 14.1151 7.6913 14.1154H11.1418L9.32393 19.1885C9.29398 19.2613 9.29508 19.3413 9.32702 19.4134C9.35895 19.4856 9.41953 19.5449 9.49737 19.5803C9.57521 19.6156 9.66495 19.6246 9.74976 19.6056C9.83456 19.5865 9.90858 19.5407 9.95792 19.4767L16.6007 11.6171C16.6387 11.5696 16.6613 11.5138 16.6659 11.4557C16.6705 11.3976 16.6571 11.3396 16.627 11.2878C16.5969 11.236 16.5513 11.1926 16.4952 11.1622C16.4392 11.1318 16.3748 11.1156 16.309 11.1154H12.8417L14.4968 6.02785C14.5138 5.9795 14.5175 5.92825 14.5076 5.87837C14.4977 5.8285 14.4745 5.78143 14.44 5.74109C14.4054 5.70076 14.3604 5.66831 14.3088 5.64647C14.2573 5.62462 14.2005 5.614 14.1433 5.61549Z" fill="black"/></svg>
</div>
<span class="nav-label">Сервіси</span>
</div>
<div class="nav-item" data-page="page-menu">
<div class="nav-icon">
<svg class="icon-inactive" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_5391_4802)"><circle cx="12" cy="12" r="11.25" stroke="white" stroke-width="1.5"/><path d="M2.25208 19C4.43043 15.9719 7.98493 14 12 14C16.015 14 19.5695 15.9719 21.7479 19C21.4436 19.423 21.1125 19.8253 20.7571 20.2045C18.877 17.3693 15.6568 15.5 12 15.5C8.34319 15.5 5.12301 17.3693 3.24289 20.2045C2.88744 19.8253 2.55633 19.4229 2.25208 19Z" fill="white"/><rect x="9" y="5" width="6" height="7" rx="3" stroke="white" stroke-width="1.5"/></g><defs><clipPath id="clip0_5391_4802"><rect width="24" height="24" rx="12" fill="white"/></clipPath></defs></svg>
<svg class="icon-active" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_5391_4816)"><circle cx="12" cy="12" r="11.25" stroke="white" stroke-width="1.5"/><path d="M12 14C7.98493 14 4.43043 15.9719 2.25208 19C2.55633 19.4229 2.88744 19.8253 3.24289 20.2045C5.43235 22.5405 8.54576 24 12 24C15.4691 24 18.5943 22.528 20.7852 20.1745L20.7683 20.1925C21.1195 19.8168 21.4468 19.4185 21.7479 19C19.5695 15.9719 16.015 14 12 14Z" fill="white"/><rect x="9" y="5" width="6" height="7" rx="3" fill="white" stroke="white" stroke-width="1.5"/></g><defs><clipPath id="clip0_5391_4816"><rect width="24" height="24" fill="white"/></clipPath></defs></svg>
</div>
<span class="nav-label">Меню</span>
</div>
</nav>
</div>
<!-- SIGNATURE PAD -->
<div id="signature-pad-container">
<div class="signature-pad-header">
<span class="signature-pad-close" id="signature-close-btn">Закрити</span>
<h2>Ваш підпис</h2>
<span></span>
</div>
<div class="signature-canvas-wrapper">
<canvas id="signature-canvas"></canvas>
</div>
<div class="signature-pad-actions">
<button class="signature-pad-btn clear" id="signature-clear-btn">Стерти</button>
<button class="signature-pad-btn save" id="signature-save-btn">Продовжити</button>
</div>
</div>
<script>
document.addEventListener('DOMContentLoaded', () => {

// --- ЛОГІКА СТАРТОВОГО ЕКРАНУ ТА ЕКРАНУ ВХОДУ ---
const splashScreen = document.getElementById('splash-screen');
const loginScreen = document.getElementById('login-screen');
const appContainer = document.querySelector('.app-container');

setTimeout(() => {
splashScreen.classList.add('hidden');
loginScreen.classList.add('visible');

setTimeout(() => {
if (splashScreen) {
splashScreen.remove();
}
}, 500);

}, 2500);

// --- ГЕНЕРАЦІЯ QR-КОДІВ ---
const generateLongData = (length = 300) => {
let result = '';
const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
for (let i = 0; i < length; i++) {
result += characters.charAt(Math.floor(Math.random() * characters.length));
}
return result;
};

document.querySelectorAll('.qr-code').forEach(qrImg => {
const longData = generateLongData(450);
qrImg.src = `https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=${encodeURIComponent(longData)}&qzone=1`;
});


// --- ЛОГІКА ВВОДУ ПАРОЛЮ ---
const passcodeDotsContainer = document.querySelector('.passcode-dots');
const passcodeDots = document.querySelectorAll('.passcode-dot');
const keypadBtns = document.querySelectorAll('.keypad-btn');
const backspaceBtn = document.getElementById('backspace-btn');
let passcode = '';
const correctPasscode = '0000';

const updateDots = () => {
passcodeDots.forEach((dot, index) => {
dot.classList.toggle('filled', index < passcode.length);
});
};

const resetLogin = () => {
passcode = '';
updateDots();
passcodeDotsContainer.classList.remove('shake');
}

const handleKeyPress = (key) => {
if (passcode.length < 4) {
passcode += key;
updateDots();
}

if (passcode.length === 4) {
setTimeout(() => {
if (passcode === correctPasscode) {
loginScreen.style.opacity = '0';
setTimeout(() => {
loginScreen.remove();
appContainer.style.display = 'flex';
navigateToPage('page-docs');
loadSignatureToPassport();
}, 300);
} else {
passcodeDotsContainer.classList.add('shake');
setTimeout(resetLogin, 500);
}
}, 200);
}
};

keypadBtns.forEach(btn => {
if (btn.textContent.trim() !== '' && !btn.querySelector('img') && !btn.querySelector('svg')) {
btn.addEventListener('click', () => {
handleKeyPress(btn.textContent);
});
}
});

backspaceBtn.addEventListener('click', () => {
if (passcode.length > 0) {
passcode = passcode.slice(0, -1);
updateDots();
passcodeDotsContainer.classList.remove('shake');
}
});

// --- ЛОГІКА СЛАЙДЕРА (ІНТЕРАКТИВНА АНІМАЦІЯ) ---
const sliderContainer = document.querySelector('.slider-container');
const sliderWrapper = document.querySelector('.slider-wrapper');
let slides = document.querySelectorAll('.slide');
const pageIndicator = document.querySelector('.page-indicator');

let slideCount = slides.length;
let currentIndex = 0;
let isDragging = false;
let startPos = 0;
let currentTranslate = 0;
let prevTranslate = 0;
let animationID;

// Динамічне створення дотсів
const setupDots = () => {
pageIndicator.innerHTML = '';
for (let i = 0; i < slideCount; i++) {
const dot = document.createElement('span');
dot.classList.add('dot');
pageIndicator.appendChild(dot);
}
updateSliderDots();
}
let dots; // Оголошуємо тут, щоб мати доступ пізніше

const getPositionX = (e) => e.type.includes('mouse') ? e.pageX : e.touches.clientX;

const updateSliderDots = () => {
dots = document.querySelectorAll('.page-indicator .dot'); // Оновлюємо вибірку дотсів
dots.forEach((dot, index) => dot.classList.toggle('active', index === currentIndex));
};

const animation = () => {
sliderWrapper.style.transform = `translateX(${currentTranslate}px)`;

const containerCenter = sliderContainer.offsetWidth / 2;
slides.forEach(slide => {
const slideCenter = slide.offsetLeft + slide.offsetWidth / 2 + currentTranslate;
const distance = Math.abs(containerCenter - slideCenter);
const slideWidth = slide.offsetWidth;
const distanceFactor = Math.min(distance / slideWidth, 1);

const scale = 1 - (0.1 * distanceFactor);
const opacity = 1 - (0.3 * distanceFactor);

slide.style.transform = `scale(${scale})`;
slide.style.opacity = `${opacity}`;
slide.style.pointerEvents = scale > 0.99 ? 'auto' : 'none';
});

if (isDragging) requestAnimationFrame(animation);
}

const setFinalSliderPosition = () => {
sliderWrapper.style.transition = 'transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
slides.forEach(slide => {
slide.style.transition = 'transform 0.4s ease, opacity 0.4s ease';
});

const targetSlide = slides[currentIndex];
if (!targetSlide) return;
const containerCenter = sliderContainer.offsetWidth / 2;
const slideCenter = targetSlide.offsetLeft + targetSlide.offsetWidth / 2;

currentTranslate = containerCenter - slideCenter;
prevTranslate = currentTranslate;

sliderWrapper.style.transform = `translateX(${currentTranslate}px)`;

slides.forEach((slide, index) => {
const scale = index === currentIndex ? 1 : 0.9;
const opacity = index === currentIndex ? 1 : 0.7;
slide.style.transform = `scale(${scale})`;
slide.style.opacity = `${opacity}`;
slide.style.pointerEvents = index === currentIndex ? 'auto' : 'none';
});

updateSliderDots();
}

const positionSliderByIndex = () => {
setFinalSliderPosition();
}

const dragStart = (e) => {
isDragging = true;
startPos = getPositionX(e);
sliderWrapper.style.transition = 'none';
slides.forEach(slide => slide.style.transition = 'none');
animationID = requestAnimationFrame(animation);
sliderContainer.style.cursor = 'grabbing';
};

const dragMove = (e) => {
if (!isDragging) return;
const currentPosition = getPositionX(e);
currentTranslate = prevTranslate + currentPosition - startPos;
};

const dragEnd = () => {
if (!isDragging) return;
isDragging = false;
cancelAnimationFrame(animationID);
sliderContainer.style.cursor = 'grab';

const movedBy = currentTranslate - prevTranslate;

if (movedBy < -80 && currentIndex < slideCount - 1) {
currentIndex++;
}
if (movedBy > 80 && currentIndex > 0) {
currentIndex--;
}

positionSliderByIndex();
};

const initializeCarousel = () => {
slides = document.querySelectorAll('.slide'); // Оновлюємо список слайдів
slideCount = slides.length; // Оновлюємо кількість слайдів
setupDots(); // Перестворюємо дотси

if (!slides[currentIndex] || sliderContainer.offsetWidth === 0) return;

sliderWrapper.style.transition = 'none';
slides.forEach(slide => slide.style.transition = 'none');

const targetSlide = slides[currentIndex];
const containerCenter = sliderContainer.offsetWidth / 2;
const slideCenter = targetSlide.offsetLeft + targetSlide.offsetWidth / 2;

currentTranslate = containerCenter - slideCenter;
prevTranslate = currentTranslate;

animation();
updateSliderDots();
}

window.addEventListener('resize', initializeCarousel);

['mousedown', 'touchstart'].forEach(e => sliderContainer.addEventListener(e, dragStart, { passive: true }));
['mouseup', 'touchend', 'mouseleave'].forEach(e => document.addEventListener(e, dragEnd));
['mousemove', 'touchmove'].forEach(e => document.addEventListener(e, dragMove, { passive: true }));

// --- НАВІГАЦІЯ ---
const navItems = document.querySelectorAll('.nav-item');

const navigateToPage = (targetPageId) => {
const oldPage = document.querySelector('.page.active');
const newPage = document.getElementById(targetPageId);

if (oldPage) oldPage.classList.remove('active');
if (newPage) newPage.classList.add('active');

navItems.forEach(nav => {
nav.classList.toggle('active', nav.dataset.page === targetPageId);
});

if (targetPageId === 'page-docs') {
setTimeout(initializeCarousel, 0);
}
}

navItems.forEach(item => {
item.addEventListener('click', () => {
navigateToPage(item.dataset.page);
});
});

navigateToPage('page-docs');

// --- ЛОГІКА ПЕРЕВЕРТАННЯ КАРТКИ, АНІМАЦІЇ І ТАЙМЕРА ---
const flipCards = document.querySelectorAll('.flip-card');
let activeTimer = null;
let currentlyFlippedCard = null;

function startTimer(card) {
const timerEl = card.querySelector('.code-timer');
const flipInner = card.querySelector('.flip-card-inner');
if (!timerEl) return;

clearInterval(activeTimer);
let timeLeft = 180; // 3:00

const updateTimerText = () => {
const minutes = Math.floor(timeLeft / 60);
let seconds = timeLeft % 60;
seconds = seconds < 10 ? '0' + seconds : seconds;
timerEl.textContent = `Код діятиме ще ${minutes}:${seconds} хв`;
};

updateTimerText();

activeTimer = setInterval(() => {
timeLeft--;
updateTimerText();
if (timeLeft <= 0) {
clearInterval(activeTimer);
timerEl.textContent = "Час вийшов";
flipInner.classList.remove('is-flipped');
currentlyFlippedCard = null;
}
}, 1000);
}

flipCards.forEach(card => {
const lottieLoader = card.querySelector('.lottie-loader');
const backContent = card.querySelector('.back-content');

if (lottieLoader) {
const anim = lottie.loadAnimation({
container: lottieLoader,
renderer: 'svg',
loop: false,
autoplay: false,
path: 'loader.json'
});

card.addEventListener('click', () => {
const movedBy = Math.abs(currentTranslate - prevTranslate);
if ((isDragging && movedBy > 10) || card.closest('.slide').style.transform !== 'scale(1)') {
return;
}

const inner = card.querySelector('.flip-card-inner');

// Якщо клікнули на вже перевернуту картку, перевертаємо її назад
if (inner.classList.contains('is-flipped')) {
inner.classList.remove('is-flipped');
clearInterval(activeTimer);
currentlyFlippedCard = null;
return;
}

// Якщо інша картка вже перевернута, перевертаємо її назад
if (currentlyFlippedCard && currentlyFlippedCard !== card) {
currentlyFlippedCard.querySelector('.flip-card-inner').classList.remove('is-flipped');
clearInterval(activeTimer);
}

// Перевертаємо поточну картку
inner.classList.toggle('is-flipped');
currentlyFlippedCard = card;

if (inner.classList.contains('is-flipped')) {
backContent.style.display = 'none';
lottieLoader.style.display = 'block';
anim.goToAndPlay(0);

setTimeout(() => {
lottieLoader.style.display = 'none';
backContent.style.display = 'flex';
startTimer(card);
}, 2000);
} else {
clearInterval(activeTimer);
currentlyFlippedCard = null;
}
});
}
});

// --- ЛОГІКА ПЕРЕМИКАЧА QR/ШТРИХКОД ---
document.querySelectorAll('.passport-switcher').forEach(switcher => {
const buttons = switcher.querySelectorAll('.passport-switcher-btn');
const displayItems = switcher.closest('.back-content').querySelector('.code-display-area').querySelectorAll('.code-display-item');

buttons.forEach(button => {
button.addEventListener('click', (e) => {
e.stopPropagation();
const type = button.dataset.type;

buttons.forEach(btn => btn.classList.remove('active'));
button.classList.add('active');

displayItems.forEach(item => {
item.classList.toggle('hidden', item.dataset.type !== type);
});
});
});
});


// --- ЛОГІКА ДІЯ.ПІДПИС ---
const signaturePadContainer = document.getElementById('signature-pad-container');
const signatureCanvas = document.getElementById('signature-canvas');
const signatureClearBtn = document.getElementById('signature-clear-btn');
const signatureSaveBtn = document.getElementById('signature-save-btn');
const signatureCloseBtn = document.getElementById('signature-close-btn');
const menuDiiaSignature = document.getElementById('menu-diia-signature');
const passportSignatureImage = document.getElementById('passport-signature-image');

let ctx = signatureCanvas.getContext('2d');
let isDrawing = false;
let lastX = 0;
let lastY = 0;

function resizeCanvas() {
const wrapper = signatureCanvas.closest('.signature-canvas-wrapper');
signatureCanvas.width = wrapper.clientWidth - 40;
signatureCanvas.height = wrapper.clientHeight - 40;

ctx.strokeStyle = '#000';
ctx.lineWidth = 25; // !!! МАКСИМАЛЬНА ТОВЩИНА ПІДПИСУ !!!
ctx.lineCap = 'round';
ctx.lineJoin = 'round';

if (localStorage.getItem('savedSignature')) {
const img = new Image();
img.onload = () => {
ctx.drawImage(img, 0, 0, signatureCanvas.width, signatureCanvas.height);
};
img.src = localStorage.getItem('savedSignature');
}
}

function startDrawing(e) {
isDrawing = true;
[lastX, lastY] = getCanvasCoordinates(e);
}

function draw(e) {
if (!isDrawing) return;
e.preventDefault();
const [currentX, currentY] = getCanvasCoordinates(e);
ctx.beginPath();
ctx.moveTo(lastX, lastY);
ctx.lineTo(currentX, currentY);
ctx.stroke();
[lastX, lastY] = [currentX, currentY];
}

function stopDrawing() {
isDrawing = false;
}

function getCanvasCoordinates(e) {
const rect = signatureCanvas.getBoundingClientRect();
if (e.touches && e.touches.length > 0) {
return [e.touches.clientX - rect.left, e.touches.clientY - rect.top];
} else {
return [e.clientX - rect.left, e.clientY - rect.top];
}
}

function clearSignature() {
ctx.clearRect(0, 0, signatureCanvas.width, signatureCanvas.height);
}

function saveSignature() {
const dataURL = signatureCanvas.toDataURL();
localStorage.setItem('savedSignature', dataURL);
signaturePadContainer.classList.remove('visible');
loadSignatureToPassport();
}

function loadSignatureToPassport() {
const savedSignature = localStorage.getItem('savedSignature');
if (savedSignature) {
passportSignatureImage.src = savedSignature;
passportSignatureImage.style.display = 'block';
} else {
passportSignatureImage.src = '';
passportSignatureImage.style.display = 'none';
}
}

menuDiiaSignature.addEventListener('click', () => {
signaturePadContainer.classList.add('visible');
setTimeout(resizeCanvas, 100);
clearSignature();
});

signatureCloseBtn.addEventListener('click', () => {
signaturePadContainer.classList.remove('visible');
});

signatureClearBtn.addEventListener('click', clearSignature);
signatureSaveBtn.addEventListener('click', saveSignature);

signatureCanvas.addEventListener('mousedown', startDrawing);
signatureCanvas.addEventListener('mousemove', draw);
signatureCanvas.addEventListener('mouseup', stopDrawing);
signatureCanvas.addEventListener('mouseout', stopDrawing);

signatureCanvas.addEventListener('touchstart', startDrawing, { passive: false });
signatureCanvas.addEventListener('touchmove', draw, { passive: false });
signatureCanvas.addEventListener('touchend', stopDrawing);

window.addEventListener('resize', () => {
if (signaturePadContainer.classList.contains('visible')) {
resizeCanvas();
}
});

// --- ЛОГІКА SERVICE WORKER ---
const VERSION = new Date().getTime();
const CACHE_NAME = `diia-clone-cache-v${VERSION}`;
const manifest = {
"name": "Дія", "short_name": "Дія", "start_url": ".", "display": "standalone", "background_color": "#c9e3eb", "theme_color": "#111111",
"icons": [{"src": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAAAXNSR0IArs4c6QAAAyJJREFUeF7t0AEBAAAAEADC/2H5NEbDAwKChAAAAAAAAAAAAAD45wEAAAAAAAAAAAAA8McDAAAAAAAAAAAAAODjBwAAAAAAAAAAAABA/3kAAAAAAAAAAAAAwB8PAAAAAAAAAAAAAHg4AQAAAAAAAAAAAMD/eQAAAAAAAAAAAADAHw8AAAAAAAAAAAAA8HACAAAAAAAAAAAAgP7zAAAAAAAAAAAAAIC/HAAAAAAAAAAAAACAhxMAAAAAAAAAAAAA+s8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/x4AAAAAAAAAAAAA8OECAAAAAAAAAAAA+M8DAAAAAAAAAAAAAOBfDwAAAAAAAAAAAACAxxMAAAAAAAAAAAAA4f88AAAAAAAAAAAAAOAfDwAAAAAAAAAAAADw4AQAAAAAAAAAAAD8nwcAAAAAAAAAAAAA8K8HAAAAAAAAAAAAAPBhAgAAAAAAAAAAAPh/ngAAAAAAAAAAAADA/xsA3g4Y9QAAAABJRU5ErkJggg==", "sizes": "192x192", "type": "image/png"}]
};
const manifestBlob = new Blob([JSON.stringify(manifest)], { type: 'application/json' });
document.getElementById('manifest').href = URL.createObjectURL(manifestBlob);
const swCode = `
const CACHE_NAME = '${CACHE_NAME}';
const urlsToCache = ['${location.href.replace(/\?.*$/, '')}'];

self.addEventListener('install', e => e.waitUntil(
caches.open(CACHE_NAME).then(c => c.addAll(urlsToCache))
));

self.addEventListener('activate', e => e.waitUntil(
caches.keys().then(names => Promise.all(
names.map(name => {
if (name !== CACHE_NAME) {
return caches.delete(name);
}
})
))
));

self.addEventListener('fetch', e => {
e.respondWith(
fetch(e.request).then(res => {
const resClone = res.clone();
caches.open(CACHE_NAME).then(cache => {
cache.put(e.request, resClone);
});
return res;
}).catch(() => caches.match(e.request))
);
});

self.addEventListener('message', e => {
if (e.data.action === 'skipWaiting') self.skipWaiting();
});
`;
const swBlob = new Blob([swCode], { type: 'application/javascript' });

if ('serviceWorker' in navigator) {
let newWorker;
const updateNotification = document.getElementById('update-notification');
updateNotification.addEventListener('click', () => newWorker.postMessage({ action: 'skipWaiting' }));
navigator.serviceWorker.register(URL.createObjectURL(swBlob)).then(reg => {
reg.addEventListener('updatefound', () => {
newWorker = reg.installing;
newWorker.addEventListener('statechange', () => {
if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
updateNotification.style.display = 'block';
}
});
});
});
let refreshing;
navigator.serviceWorker.addEventListener('controllerchange', () => {
if (refreshing) return;
window.location.reload();
refreshing = true;
});
}
});
</script>
</body>
</html>
